<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Assembling and Deploying Applications - Sun GlassFish Enterprise Server v3 Prelude Application Deployment Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-10-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p3.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p5.html">Next</a></td>
</tr>
</table>


<a name="beact"></a>Chapter&#160;1<h3>Assembling and Deploying Applications</h3><p>This chapter describes Sun Java<sup>TM</sup> System Enterprise Server modules and how these modules
are assembled. This chapter also describes tools for assembly and deployment.</p><p>The Enterprise Server modules include Java Platform, Enterprise Edition (Java EE platform) standard
features and Enterprise Server specific features. Only Enterprise Server specific features are described
in detail in this chapter.</p><p>The following topics are presented in this chapter:</p>
<ul><li><p><a href="#beacu">Overview of Assembly and Deployment</a></p></li>
<li><p><a href="#beadm">Assembling Modules and Applications</a></p></li>
<li><p><a href="#beadu">Deploying Modules and Applications</a></p></li></ul>

<hr><p><b>Note - </b>For GlassFish v3 Prelude, EJB modules are not supported unless the optional EJB
container add-on component is downloaded from the Update Tool. Only stateless session beans with
local interfaces and entity beans that use the Java Persistence API are supported.
Stateful, message-driven, and EJB 2.0 and 2.1 entity beans are not supported. Remote
interfaces and remote business interfaces for any of the bean types are not
supported. The <tt>sun-ejb-jar.xml</tt> elements related to these features are ignored.</p><p>Web services are not supported unless the optional Metro (JSR 109) add-on component is
downloaded from the Update Tool. Without the Metro component, a servlet or EJB
module cannot be a web service endpoint, and the <tt>sun-web.xml</tt> and <tt>sun-ejb-jar.xml</tt>
elements related to web services are ignored.</p><p>For information about the Update Tool, see the <a href="http://docs.sun.com/doc/820-5968"><i>Sun GlassFish Enterprise Server v3 Prelude Installation Guide</i></a>.</p>
<hr>


<a name="beacu"></a><h3>Overview of Assembly and Deployment</h3>
<a name="indexterm-1"></a><a name="indexterm-2"></a><a name="indexterm-3"></a><p>Application assembly (also known as packaging) is the process of combining discrete components
into a single unit that can be deployed to a Java-EE-compliant application server. This
section covers the following topics:</p>
<ul><li><p><a href="#beacv">About Modules</a></p></li>
<li><p><a href="#gatsc">Java EE Standard Annotation</a></p></li>
<li><p><a href="#beacx">Java EE Standard Descriptors</a></p></li>
<li><p><a href="#beacy">Enterprise Server Descriptors</a></p></li>
<li><p><a href="#beacz">Naming Standards</a></p></li>
<li><p><a href="#beada">Directory Structure</a></p></li></ul>


<a name="beacv"></a><h4>About Modules</h4>
<a name="indexterm-4"></a><a name="indexterm-5"></a><p>A module is a collection of one or more components that execute in
the same container type (for example, web or EJB) with annotations or deployment
descriptors of that type. In the Java EE modules, one descriptor is Java
EE standard, the other is optional and Enterprise Server specific. Annotations can be
used instead of Java EE standard descriptors.</p><p>Types of modules are as follows:</p>
<ul><li><p><a name="indexterm-6"></a><b>Web Application Archive (WAR)</b> &#8212; A web application is a collection of servlets, HTML pages, classes, and other resources that can be bundled and deployed to several Java EE application servers. A WAR file can consist of the following items: servlets, JavaServer Pages<sup>TM</sup> (JSP<sup>TM</sup>) files, JSP tag libraries, utility classes, static pages, client-side applets, beans, bean classes, and annotations or deployment descriptors (<tt>web.xml</tt> and <tt>sun-web.xml</tt>).</p></li>
<li><p><a name="indexterm-7"></a><b>EJB JAR File</b> &#8212; The EJB JAR file is the standard format for assembling enterprise beans. This file contains the bean classes (home, remote, local, and implementation), all of the utility classes, and annotations or deployment descriptors (<tt>ejb-jar.xml</tt> and <tt>sun-ejb-jar.xml</tt>).</p></li></ul>
<p>Package definitions must be used in the source code of all modules so
the class loader can properly locate the classes after the modules have been
deployed.</p><p>Because the information in a deployment descriptor is declarative, it can be changed
without requiring modifications to source code. At run time, the Java EE server
reads this information and acts accordingly.</p><p>EJB JAR and web modules can be deployed separately, outside of any application. EJB components
are assembled in a JAR file with annotations or <tt>ejb-jar.xml</tt> and <tt>sun-ejb-jar.xml</tt>
deployment descriptors. Web components are assembled in a WAR file with annotations or
<tt>web.xml</tt> and <tt>sun-web.xml</tt> deployment descriptors.</p>

<a name="gatsc"></a><h4>Java EE Standard Annotation</h4>
<a name="indexterm-8"></a><p>The Enterprise Server supports modules annotated according to the following specifications:</p>
<ul><li><p>JSR 250 Common Annotation Specification (<a href="http://www.jcp.org/en/jsr/detail?id=250">http://www.jcp.org/en/jsr/detail?id=250</a>)</p></li>
<li><p>JSR 181 Annotation for Web Services Specification (<a href="http://www.jcp.org/en/jsr/detail?id=181">http://www.jcp.org/en/jsr/detail?id=181</a>)</p></li>
<li><p>EJB 3.0 Specification (<a href="http://www.jcp.org/en/jsr/detail?id=220">http://www.jcp.org/en/jsr/detail?id=220</a>)</p></li></ul>
<p>The following annotation and deployment descriptor combinations are supported:</p>
<ul><li><p>Java EE modules can be packaged with full Java EE 5.0 compliant standard and runtime deployment descriptors. If the standard deployment descriptors have specified the attribute <tt>metadata-complete</tt>, annotations in the module are ignored.</p></li>
<li><p>Java EE modules can be fully annotated with metadata defined by the listed specifications.  Annotation eliminates the need for Java EE standard deployment descriptors. In most cases, the Enterprise Server deployment descriptors are also optional.</p></li>
<li><p>Java EE modules can be partially annotated with some deployment information in standard deployment descriptors. In case of conflicts, deployment descriptor values supersede the annotated metadata, but a warning message is logged.</p></li></ul>


<a name="beacx"></a><h4>Java EE Standard Descriptors</h4>
<a name="indexterm-9"></a><a name="indexterm-10"></a><p>Java EE standard deployment descriptors are described in the Java EE specification, v5.
You can find the specification at <a href="http://java.sun.com/products/">http://java.sun.com/products/</a>. Information about the XML schemas that
define Java EE standard deployment descriptors is available at <a href="http://java.sun.com/xml/ns/javaee/">http://java.sun.com/xml/ns/javaee/</a>.</p>

<a name="beacy"></a><h4>Enterprise Server Descriptors</h4>
<a name="indexterm-11"></a><a name="indexterm-12"></a><p>The Enterprise Server uses additional, optional deployment descriptors for configuring features specific to
the Enterprise Server.</p><p>For complete descriptions of these files, see <a href="p5.html">Appendix&#160;A, Deployment Descriptor Files</a>.</p>

<a name="beacz"></a><h4>Naming Standards</h4>
<a name="indexterm-13"></a><p>Names of applications and individually deployed EJB JAR and WAR modules must be
unique within an Enterprise Server domain. Modules of the same type within an
application must have unique names.</p><p><a name="indexterm-14"></a>If you do not explicitly specify a name, the default name is the
first portion of the file name (without the <tt>.war</tt> or <tt>.jar</tt> extension).
Modules of different types can have the same name within an application, because
the directories holding the individual modules are named with <tt>_jar</tt> and <tt>_war</tt> suffixes. This
is the case when you use the Administration Console or the <tt>asadmin</tt>
command. If you use the <tt>asadmin deploy</tt> command to deploy a directory, your directory structure must
follow this same convention. See <a href="#gbzce">Directory Deployment</a> and <a href="#beaeb">Tools for Deployment</a>.</p><p>You can specify a name in one of these ways:</p>
<ul><li><p>If deploying using the Administration Console, you can specify a name in the Application Name field.</p></li>
<li><p>If deploying using the <tt>asadmin deploy</tt> command, you can override the default name by specifying the <tt>--name</tt> option.</p></li></ul>
<p>Make sure your package and file names do not contain spaces or characters
that are illegal for your operating system.</p><p>Using a Java package-like naming scheme is recommended for module filenames, module names
as found in the <tt>&#60;module-name></tt> portion of the <tt>ejb-jar.xml</tt> files, and EJB names
as found in the <tt>&#60;ejb-name></tt> portion of the <tt>ejb-jar.xml</tt> files. The use of
this package-like naming scheme ensures that name collisions do not occur. The benefits of
this naming practice apply not only to the Enterprise Server, but to other
Java EE application servers as well.</p><p><a name="indexterm-15"></a>JNDI lookup names for EJB components must also be unique.</p>

<a name="beada"></a><h4>Directory Structure</h4>
<a name="indexterm-16"></a><a name="indexterm-17"></a><p>When you deploy a module, the module is expanded from the WAR or JAR
file to an open directory structure. The directories are named with <tt>_jar</tt> and
<tt>_war</tt> suffixes. If you use the <tt>asadmin deploy</tt> command to deploy a directory, your directory
structure must follow this same convention; see <a href="#gbzce">Directory Deployment</a>. Module directory structures follow the
structure outlined in the Java EE specification.</p>

<a name="beadm"></a><h3>Assembling Modules and Applications</h3>
<p>Assembling (or packaging) modules and applications in Enterprise Server conforms to all of
the customary Java-EE-defined specifications. The only difference is that when you assemble in
Enterprise Server, you can include optional Enterprise Server specific deployment descriptors that enhance
the functionality of the Enterprise Server.</p><p><a name="indexterm-18"></a><a name="indexterm-19"></a><a name="indexterm-20"></a>For example, when you assemble an EJB JAR module, you annotate or create
two deployment descriptor files with these names: <tt>ejb-jar.xml</tt> and <tt>sun-ejb-jar.xml</tt>. For more
information about <tt>sun-ejb-jar.xml</tt>, see <a href="p5.html">Appendix&#160;A, Deployment Descriptor Files</a>.</p><p>The Enterprise Server provides these tools for assembling and verifying a module or
an application:</p>
<ul><li><p><a href="#beadp">The NetBeans IDE</a></p></li></ul>


<a name="beadp"></a><h4>The NetBeans IDE</h4>
<p><a name="indexterm-21"></a>You can use the NetBeans<sup>TM</sup> Integrated Development Environment (IDE), or another IDE, to
assemble Java EE applications and modules. The GlassFish edition of the Enterprise Server
is bundled with the NetBeans 6.1 IDE. For more information about using the NetBeans
IDE, see <a href="http://www.netbeans.org">http://www.netbeans.org</a>.</p>

<a name="beadu"></a><h3>Deploying Modules and Applications</h3>
<p>This section describes the different ways to deploy Java EE modules to the
Enterprise Server. It covers the following topics:</p>
<ul><li><p><a href="#beadv">Deployment Errors</a></p></li>
<li><p><a href="#ablgy">The Deployment Life Cycle</a></p></li>
<li><p><a href="#beadw">Deployment for Development</a></p></li>
<li><p><a href="#beaeb">Tools for Deployment</a></p></li>
<li><p><a href="#gbiye">Deploying a Web Service</a></p></li>
<li><p><a href="#beaej">Deploying a WAR Module</a></p></li>
<li><p><a href="#beaek">Deploying an EJB JAR Module</a></p></li>
<li><p><a href="#beaeo">Access to Shared Frameworks</a></p></li></ul>


<a name="beadv"></a><h4>Deployment Errors</h4>
<a name="indexterm-22"></a><a name="indexterm-23"></a><p>If an error occurs during deployment, the module is not deployed. This prevents
a partial deployment that could leave the server in an inconsistent state.</p><p>In addition, certain warning conditions allow a module to be deployed but return
a warning message to the deployment client.</p>

<a name="ablgy"></a><h4>The Deployment Life Cycle</h4>
<a name="indexterm-24"></a><p>After installing the Enterprise Server and starting a domain, you can deploy (install)
Java EE modules. During deployment and as the application is changed, a module can
go through the following stages:</p>
<ol><li><p>Initial Deployment</p><p>Before deploying a module, start the domain.</p><p>Because modules are packaged in archive files, specify the archive file name during deployment.</p><p><a name="indexterm-25"></a><a name="indexterm-26"></a>Deployment is <b>dynamic</b>: you don&#8217;t need to restart the server after deploying a module. If you do restart, all deployed modules are still deployed and available.</p></li>
<li><p>Enabling or Disabling</p><p>By default, a deployed module is enabled, which means that it is runnable. To prevent access, disable the application or module. A disabled module is not uninstalled from the domain and can be easily enabled after deployment. For more information, see <a href="#beady">Disabling a Deployed Application or Module</a>.</p></li>
<li><p><a name="indexterm-27"></a><a name="indexterm-28"></a>Redeployment</p><p>To replace a deployed module, redeploy it. Redeploying automatically undeploys the previously deployed module and replaces it with the new one.</p></li>
<li><p>Undeployment</p><p>To uninstall a module, undeploy it.</p></li></ol>


<a name="beadw"></a><h4>Deployment for Development</h4>
<p>This section covers the following topics related to deployment for development:</p>
<ul><li><p><a href="#beadx">Dynamic Deployment</a></p></li>
<li><p><a href="#beady">Disabling a Deployed Application or Module</a></p></li>
<li><p><a href="#beadz">Dynamic Reloading</a></p></li>
<li><p><a href="#beaea">Automatic Deployment</a></p></li>
<li><p><a href="#gbzce">Directory Deployment</a></p></li></ul>

<hr><p><b>Note - </b><a name="indexterm-29"></a><a name="indexterm-30"></a><a name="indexterm-31"></a>You can overwrite a previously deployed module by using the <tt>asadmin redeploy</tt> command, the
<tt>--force</tt> option of <tt>asadmin deploy</tt>, or the Redeploy button in the Administration Console. However, you
must remove a preconfigured resource before you can update it.</p>
<hr>


<a name="beadx"></a><h5>Dynamic Deployment</h5>
<a name="indexterm-32"></a><a name="indexterm-33"></a><a name="indexterm-34"></a><a name="indexterm-35"></a><p>You can deploy, redeploy, and undeploy a module without restarting the server. This
is called dynamic deployment. Although primarily for developers, dynamic deployment can be used in
operational environments to bring new applications and modules online without requiring a server
restart. </p><p><a name="indexterm-36"></a>Whenever a redeployment is done, the sessions at that transit time become invalid
unless you use the <tt>keepSessions=true</tt> property of the <tt>asadmin redeploy</tt> command. For example:</p><pre>asadmin redeploy --properties keepSessions=true --name hello.war</pre><p>For details, see the <i><a href="http://docs.sun.com/doc/820-4497"><i>Sun GlassFish Enterprise Server v3 Prelude Reference Manual</i></a></i>. </p><p>Keep Sessions is also a checkbox option when you redeploy using the Administration
Console. For details, click the Help button in the Administration Console.</p>

<a name="beady"></a><h5>Disabling a Deployed Application or Module</h5>
<a name="indexterm-37"></a><a name="indexterm-38"></a><a name="indexterm-39"></a><p>You can disable a deployed module without removing it from the server. Disabling
a module makes it inaccessible to clients.</p><p>To disable a module using the <tt>asadmin disable</tt> command, see the <a href="http://docs.sun.com/doc/820-4497"><i>Sun GlassFish Enterprise Server v3 Prelude Reference Manual</i></a>.</p>

<a name="fvyje"></a><h5>To Disable a Module in the Administration Console</h5>
<a name="indexterm-40"></a><ol>
<li><b>Open the Applications component.</b></li>
<li><b>Go to the page for the type of module. </b><p>For example, for a web application, go to the Web Applications page.</p></li>
<li><b>Click on the box to the left of the name of each
module you wish to disable.</b></li>
<li><b>Click on the Disable button.</b></li></ol><h6>See Also</h6><p>For details, click the Help button in the Administration Console.</p>

<a name="beadz"></a><h5>Dynamic Reloading</h5>
<a name="indexterm-41"></a><a name="indexterm-42"></a><p>If dynamic reloading is enabled (it is by default), you do not have
to redeploy a module when you change its code or deployment descriptors. Simply
copy the changed class files or descriptors into the deployment directory for the
module. Then update the timestamp of a file named <tt>.reload</tt> as described in <a href="#fwakh">To Reload Code or Deployment Descriptor Changes</a>.
The server checks for changes periodically and redeploys the module, automatically and dynamically, with
the changes. Deployment directories are as follows:</p><pre><i>domain-dir</i>/applications/<i>module-name</i></pre>
<hr><p><b>Note - </b>Deployment directories may change between Enterprise Server releases.</p>
<hr>
<p><a name="indexterm-43"></a>Dynamic reloading is useful in a development environment, because it allows code changes
to be tested quickly. In a production environment, however, dynamic reloading might degrade performance.
In addition, whenever a reload is done, the sessions at that transit time
become invalid. The client must restart the session. JSP file changes don't need
to be dynamically reloaded. Modified JSP files are automatically recompiled and reloaded when
they are accessed.</p>

<a name="fvybc"></a><h5>To Enable Dynamic Reloading in the Administration Console</h5>
<a name="indexterm-44"></a><ol>
<li><b>Select the Application Server component.</b></li>
<li><b>Select the Advanced tab.</b></li>
<li><b>Select the Applications Configuration tab.</b></li>
<li><b>Check the Reload Enabled box to enable dynamic reloading.</b></li>
<li><b>Enter a number of seconds in the Reload Poll Interval field. </b><p>This sets the interval at which modules are checked for code changes and
dynamically reloaded. The default is <tt>2</tt>.</p></li></ol><h6>See Also</h6><p>For details, click the Help button in the Administration Console.</p>

<a name="fwakh"></a><h5>To Reload Code or Deployment Descriptor Changes</h5>
<ol>
<li><b><a name="indexterm-45"></a>Create an empty file named <tt>.reload</tt> at the root of the deployed module.</b><pre><i>domain-dir</i>/applications/<i>module-name</i>/.reload</pre>
<hr><p><b>Note - </b>Deployment directories may change between Enterprise Server releases.</p>
<hr>
</li>
<li><b>Explicitly update the <tt>.reload</tt> file&#8217;s timestamp (<tt>touch .reload</tt> in UNIX) each time you make changes.</b></li></ol>

<a name="beaea"></a><h5>Automatic Deployment</h5>
<a name="indexterm-46"></a><p>Automatic deployment, also called <b>autodeployment</b>, involves copying a module file (JAR, WAR) into a special
directory, where it is automatically deployed by the Enterprise Server. To undeploy an
automatically deployed module, simply remove its file from the special autodeployment directory. This is
useful in a development environment, because it allows new code to be tested
quickly. Autodeployment is enabled by default.</p><p>Autodeployment of a web services JSR 181 annotated file is supported. For more
information, see <a href="http://www.jcp.org/en/jsr/detail?id=181">JSR 181</a> and <a href="http://docs.sun.com/doc/820-4496/gaszn?a=view">Chapter 5, Developing Web Services, in <i>Sun GlassFish Enterprise Server v3 Prelude Developer&#8217;s Guide</i></a>.</p><p>Autodeployment is enabled by default.</p>

<a name="fvxze"></a><h5>To Enable and Configure or to Disable Autodeployment</h5>
<ol>
<li><b>Select the Application Server component.</b></li>
<li><b>Select the Advanced tab.</b></li>
<li><b>Select the Applications Configuration tab.</b></li>
<li><b>Check the Auto Deploy Enabled box to enable autodeployment, or uncheck this box
to disable autodeployment.</b></li>
<li><b>Enter a number of seconds in the Auto Deploy Poll Interval field.</b><p>This sets the interval at which modules are checked for code changes and
dynamically reloaded. The default is <tt>2</tt>.</p></li>
<li><b>You can change the Auto Deploy Directory. </b><p>You can enter an absolute or relative path. A relative path is relative to
<i>domain-dir</i>. The default is <i>domain-dir</i><tt>/autodeploy</tt>. </p></li>
<li><b>Check the Precompile Enabled box to precompile any JSP files.</b></li></ol><h6>See Also</h6><p>For details, click the Help button in the Administration Console.</p>

<a name="gbzce"></a><h5>Directory Deployment</h5>
<a name="indexterm-47"></a><a name="indexterm-48"></a><a name="indexterm-49"></a><p>A directory containing an unpackaged module is sometimes called an exploded directory. 
To deploy a directory instead of an EAR or WAR, you can do one
of the following:</p>
<ul><li><p>Use the Administration Console as described in <a href="#beaeh">The Administration Console Deployment Pages</a> and enter a path to an exploded directory instead of a path to an archive file.</p></li>
<li><p>Use the <tt>asadmin deploy</tt> command and specify a path to an exploded directory instead of a path to an archive file. See the <a href="http://docs.sun.com/doc/820-4497"><i>Sun GlassFish Enterprise Server v3 Prelude Reference Manual</i></a>.</p></li></ul>
<p>The contents of the directory must match the contents of a corresponding Java
EE archive file. For example, if you deploy a Web application from a
directory, the contents of the directory must be the same as a corresponding
WAR file. In addition, the directories holding the modules must be named with
<tt>_jar</tt> and <tt>_war</tt> suffixes. For information about the required directory contents, see the
appropriate specifications.</p><p>The directory must be accessible to the machine on which the Enterprise
Server runs.</p><p>You can change the deployment descriptor files directly in the exploded directory. 
If your environment is configured to use dynamic reloading, you can also dynamically
reload modules deployed from the directory. For more information, see <a href="#beadz">Dynamic Reloading</a>.</p>
<hr><p><b>Note - </b>On Windows, if you are deploying a directory on a mapped drive, you
must be running the Enterprise Server as the same user to which the
mapped drive is assigned, or the Enterprise Server won&#8217;t see the directory.</p>
<hr>


<a name="beaeb"></a><h4>Tools for Deployment</h4>
<a name="indexterm-50"></a><a name="indexterm-51"></a><p>This section discusses the various tools that can be used to deploy modules
and applications. The deployment tools include:</p>
<ul><li><p><a href="#beaeg">The <tt>asadmin</tt> Deployment Commands</a></p></li>
<li><p><a href="#beaeh">The Administration Console Deployment Pages</a></p></li></ul>


<a name="beaeg"></a><h5>The <tt>asadmin</tt> Deployment Commands</h5>
<p>You can use the following <tt>asadmin</tt> commands to deploy or undeploy web or
EJB modules on local servers. </p>
<ul><li><p><a name="indexterm-52"></a><tt>deploy</tt> &#8212; Deploys a web or EJB module. If the module is already deployed, you can force redeployment by setting the <tt>--force</tt> option to <tt>true</tt>. You can also deploy a module in an expanded directory structure. See <a href="#gbzce">Directory Deployment</a>.</p></li>
<li><p><a name="indexterm-53"></a><tt>redeploy</tt> &#8212; Redeploys a web or EJB module that is already deployed. Whenever a redeployment is done, the sessions at that transit time become invalid unless you use the <tt>keepSessions=true</tt> property of the <tt>asadmin redeploy</tt> command.</p></li>
<li><p><a name="indexterm-54"></a><tt>undeploy</tt> &#8212; Undeploys a web or EJB module.</p></li>
<li><p><a name="indexterm-55"></a><tt>disable</tt> &#8212; Immediately disables a web or EJB module. Disabling a web module makes it inaccessible to clients.</p></li>
<li><p><a name="indexterm-56"></a><tt>enable</tt> &#8212; Immediately enables a web or EJB module.</p></li>
<li><p><a name="indexterm-57"></a><tt>list-components</tt> &#8212; Lists all deployed web or EJB modules.</p></li>
<li><p><a name="indexterm-58"></a><tt>deploydir</tt> &#8212; Deploys a web or EJB module from an expanded directory structure. Deprecated; use <tt>asadmin deploy</tt> instead.</p></li></ul>
<p>For details, see the <i><a href="http://docs.sun.com/doc/820-4497"><i>Sun GlassFish Enterprise Server v3 Prelude Reference Manual</i></a></i>. </p>

<a name="beaeh"></a><h5>The Administration Console Deployment Pages</h5>
<p><a name="indexterm-59"></a><a name="indexterm-60"></a>You can use the Administration Console to deploy modules to both local and remote
Enterprise Server sites. </p>

<a name="fvyfv"></a><h5>To Use the Administration Console for Deployment</h5>
<ol>
<li><b>Open the Applications component.</b></li>
<li><b>Go to the page for the type of application or module.</b><p>For example, for a web application, go to the Web Applications page. You
can undeploy, enable, or disable an application or module from the table on
this page.</p></li>
<li><b>Click on the Deploy button.</b><p><a name="indexterm-61"></a>On this page, you type the path to the WAR, JAR, or the
exploded directory structure. You can also specify deployment settings that vary according to
the type of module.</p></li></ol><h6>See Also</h6><p>For details, click the Help button in the Administration Console.</p><p>For more information on deploying from an exploded directory structure, see <a href="#gbzce">Directory Deployment</a>.</p>

<a name="gbiye"></a><h4>Deploying a Web Service</h4>
<a name="indexterm-62"></a>
<hr><p><b>Note - </b>Web services are not supported unless the optional Metro (JSR 109) add-on component
is downloaded from the Update Tool. Without the Metro component, a servlet or
EJB module cannot be a web service endpoint, and the <tt>sun-web.xml</tt> and <tt>sun-ejb-jar.xml</tt>
elements related to web services are ignored.</p><p>For information about the Update Tool, see the <a href="http://docs.sun.com/doc/820-5968"><i>Sun GlassFish Enterprise Server v3 Prelude Installation Guide</i></a>.</p>
<hr>
<p>You deploy a web service endpoint to the Enterprise Server just as you
would any servlet or stateless session bean (SLSB).</p><p>Web service management is fully supported in the Administration Console. If the deployed
module has a web service endpoint, it is detected automatically during deployment. Once the
module is deployed, click on the Web Service component. The table in the
right frame lists deployed web service endpoints.</p><p>You can use the <tt>--registryjndiname</tt> option of the <tt>asadmin deploy</tt> command to publish the
web service as part of deployment, but this is optional. See <a href="#beaeb">Tools for Deployment</a>.</p><p>To deploy a JSR 181 annotated file, use the autodeployment feature. You can
compile and deploy in one step, as in the following example:</p><pre>javac -cp javaee.jar -d <i>domain-dir</i>/autodeploy MyWS.java</pre><p>For more information about JSR 181, see <a href="http://jcp.org/en/jsr/detail?id=181">http://jcp.org/en/jsr/detail?id=181</a>. For more information about autodeployment,
see <a href="#beaea">Automatic Deployment</a>.</p><p>The Sun-specific deployment descriptor files <tt>sun-web.xml</tt> and <tt>sun-ejb-jar.xml</tt> provide optional web service
enhancements in their <a href="p5.html#beayv">webservice-endpoint</a> and <a href="p5.html#beayt">webservice-description</a> elements.</p><p>For more information about web services, see <a href="http://www.jcp.org/en/jsr/detail?id=181">JSR 181</a> and <a href="http://docs.sun.com/doc/820-4496/gaszn?a=view">Chapter 5, Developing Web Services, in <i>Sun GlassFish Enterprise Server v3 Prelude Developer&#8217;s Guide</i></a>.</p>

<a name="beaej"></a><h4>Deploying a WAR Module</h4>
<a name="indexterm-63"></a><a name="indexterm-64"></a><p>You deploy a WAR module as described in <a href="#beaeb">Tools for Deployment</a>. If you do
not specify a context root, the default is the name of the WAR
file without the extension.</p><p>If a web application accesses a <tt>DataSource</tt> that is not specified in a
<tt>resource-ref</tt> in <tt>sun-web.xml</tt>, or there is no <tt>sun-web.xml</tt> file, the <tt>resource-ref-name</tt> defined
in <tt>web.xml</tt> is used.  A warning message is logged recording the JNDI
name used to look up the resource.</p><p><a name="indexterm-65"></a><a name="indexterm-66"></a><a name="indexterm-67"></a>You can precompile JSP files during deployment by checking the appropriate box in
the Administration Console, or by using the <tt>--precompilejsp</tt> option of the <tt>asadmin deploy</tt> command.</p><p><a name="indexterm-68"></a><a name="indexterm-69"></a><a name="indexterm-70"></a><a name="indexterm-71"></a>You can keep the generated source for JSP files by adding the <tt>keepgenerated</tt>
flag to the <tt>jsp-config</tt> element in <tt>sun-web.xml</tt>. For example:</p><pre>&#60;sun-web-app>
   ...
   &#60;jsp-config>
      &#60;property name=keepgenerated value=true />
   &#60;/jsp-config>
&#60;/sun-web-app></pre><p>If you include this property when you deploy the WAR module, the generated
source is kept in <i>domain-dir</i><tt>/generated/jsp/</tt><i>module-name</i>.</p><p>For more information about JSP precompilation, see <a href="p5.html#beatx">jsp-config</a>.</p><p>If you deploy a web application and don't specify any assigned virtual servers,
the web application is assigned to all currently defined virtual servers. If you
then create additional virtual servers and want to assign existing web applications to
them, you must redeploy the web applications. For more information about virtual servers, see
<a href="http://docs.sun.com/doc/820-4507/abhfg?a=view">virtual-server in <i>Sun GlassFish Enterprise Server v3 Prelude Administration Reference</i></a>.</p><p>Whenever a redeployment is done, the sessions at that transit time become invalid
unless you use the <tt>keepSessions=true</tt> property of the <tt>asadmin redeploy</tt> command. For example:</p><pre>asadmin redeploy --properties keepSessions=true --name hello.war</pre><p>For details, see the <i><a href="http://docs.sun.com/doc/820-4497"><i>Sun GlassFish Enterprise Server v3 Prelude Reference Manual</i></a></i>. </p><p>Keep Sessions is also a checkbox option when you redeploy using the Administration
Console. For details, click the Help button in the Administration Console.</p><p>Web module context roots must be unique within the server.</p>

<a name="beaek"></a><h4>Deploying an EJB JAR Module</h4>
<a name="indexterm-72"></a><a name="indexterm-73"></a>
<hr><p><b>Note - </b>For GlassFish v3 Prelude, EJB modules are not supported unless the optional EJB container
add-on component is downloaded from the Update Tool. Only stateless session beans with
local interfaces and entity beans that use the Java Persistence API are supported.
Stateful, message-driven, and EJB 2.0 and 2.1 entity beans are not supported. Remote
interfaces and remote business interfaces for any of the bean types are not
supported. The <tt>sun-ejb-jar.xml</tt> elements related to these features are ignored.</p><p>For information about the Update Tool, see the <a href="http://docs.sun.com/doc/820-5968"><i>Sun GlassFish Enterprise Server v3 Prelude Installation Guide</i></a>.</p>
<hr>
<p>You deploy an EJB JAR module as described in <a href="#beaeb">Tools for Deployment</a>.</p><p>If no JNDI name for the EJB JAR module is specified in
the <tt>jndi-name</tt> element immediately under the <tt>ejb</tt> element in <tt>sun-ejb-jar.xml</tt>, or there is
no <tt>sun-ejb-jar.xml</tt> file, a default, non-clashing JNDI name is derived. A warning message
is logged recording the JNDI name used to look up the EJB JAR
module.</p>

<a name="beaeo"></a><h4>Access to Shared Frameworks</h4>
<a name="indexterm-74"></a><a name="indexterm-75"></a><p>When Java EE applications and modules use shared framework classes (such as utility
classes and libraries) the classes can be put in the path for the
Common Classloader or an application-specific class loader rather than in an application or
module. If you assemble a large, shared library into every module that uses
it, the result is a huge file that takes too long to register
with the server. In addition, several versions of the same class could exist
in different classloaders, which is a waste of resources. For more information, see
<a href="http://docs.sun.com/doc/820-4496/beade?a=view">Chapter 2, Class Loaders, in <i>Sun GlassFish Enterprise Server v3 Prelude Developer&#8217;s Guide</i></a>.</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p3.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p5.html">Next</a></td>
</tr>
</table>



</body>
</html>

