<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Administering Database Connectivity  - Sun GlassFish Enterprise Server v3 Prelude Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p7.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p9.html">Next</a></td>
</tr>
</table>


<a name="ablih"></a>Chapter&#160;5<h3>Administering Database Connectivity </h3><a name="indexterm-151"></a><a name="indexterm-152"></a><a name="indexterm-153"></a><p>This chapter provides procedures for performing database connectivity tasks in the Sun GlassFish<sup>TM</sup>
Enterprise Server v3 Prelude environment by using the <tt>asadmin</tt> command-line utility. </p><p>The following topics are addressed here:</p>
<ul><li><p><a href="#ggkon">Setting Up the Database</a></p></li>
<li><p><a href="#ggndx">Configuring Access to the Database</a></p></li>
<li><p><a href="#beamw">Configuration Specifics for JDBC Drivers</a></p></li></ul>
<p>Instructions for accomplishing these tasks by using the Admin Console are contained in
the Admin Console online help.</p>

<a name="ggkon"></a><h3>Setting Up the Database</h3>
<a name="indexterm-154"></a><a name="indexterm-155"></a><a name="indexterm-156"></a><p>Most applications use relational databases to store, organize, and retrieve data. Applications access
relational databases through the Java<sup>TM</sup> Database Connectivity (JDBC) API. </p><p>The following topics are addressed here:</p>
<ul><li><p><a href="#gharl">To Install the Database and Database Driver</a></p></li>
<li><p><a href="#ggndz">To Start the Database</a></p></li>
<li><p><a href="#ggnbw">To Stop the Database</a></p></li>
<li><p><a href="#ghmbq">Java DB Utility Scripts</a></p></li></ul>


<a name="gharl"></a><h4>To Install the Database and Database Driver</h4><a name="indexterm-157"></a><ol>
<li><b>Install a supported database product.</b><p>To see the current list of database products supported by Enterprise Server, refer
to the <a href="http://docs.sun.com/doc/820-4494"><i>Sun GlassFish Enterprise Server v3 Prelude Release Notes</i></a>.</p></li>
<li><b>Install a supported JDBC driver for the database product.</b><p>For a list of drivers supported by Enterprise Server, see <a href="#beamw">Configuration Specifics for JDBC Drivers</a>.</p></li>
<li><b>Make the JAR file for the JDBC driver accessible to the domain administration
server (DAS).</b><p>See <a href="#ghatb">Integrating the JDBC Driver</a>.</p></li>
<li><b>Create the database.</b><p>The application provider usually delivers scripts for creating and populating the database.</p></li></ol>

<a name="ggndz"></a><h4>To Start the Database</h4><a name="indexterm-158"></a><a name="indexterm-159"></a><a name="indexterm-160"></a><p>Enterprise Server includes an implementation of Java DB, however, you can use any
JDBC-compliant database. The database is not started automatically when you start Enterprise Server,
so if you have applications that require a database, you need to start
Java DB manually by using the local <tt>start-database</tt> command.</p><ul>
<li><b>Start the database by using the <a href="http://docs.sun.com/doc/820-4497/start-database-1?a=view"><tt>start-database</tt>(1)</a> command.</b><p>When the database server starts, or a client connects to it successfully, the
following files are created at the location that is specified by the <tt>--dbhome</tt>
option: </p>
<ul><li><p> The <tt>derby.log</tt> file contains the database server process log along with its standard output and standard error information.</p></li>
<li><p>The database files contain your schema (for example, database tables).</p></li></ul>
</li></ul><a name="ggooc"></a><h6>Example&#160;5-1 Starting a Database</h6><p>The following example command starts Java DB on port 5001 of <tt>localhost</tt>:</p><pre>asadmin start-database --dbhost=localhost --dbport=5001</pre><p>Information similar to the followingt is displayed (partial output):</p><pre>Database started in Network Server mode on host localhost and port 5001.
--------- Derby Network Server Information --------
Version: CSS10020/10.2.2.1 - (538595)  Build: 538595  DRDA Product Id: CSS10020
-- listing properties --
derby.drda.traceDirectory=C:\prelude\v3_prelude_release\distrib...
derby.drda.maxThreads=0
derby.drda.keepAlive=true
derby.drda.minThreads=0
derby.drda.portNumber=5001
derby.drda.logConnections=false
derby.drda.timeSlice=0
derby.drda.startNetworkServer=false
derby.drda.host=localhost
derby.drda.traceAll=false
.
.
.
Starting database in the background.
Log redirected to C:\prelude\v3_prelude_release\distributions\web\target\glassfi
sh\databases\derby.log.
Command start-database executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin start-database <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnbw"></a><h4>To Stop the Database</h4><a name="indexterm-161"></a><a name="indexterm-162"></a><a name="indexterm-163"></a><p>The local <tt>stop-database</tt> command enables you to stop Java DB on a specified
port. A single host can have multiple database server processes running on different
ports. </p><ol>
<li><b>If necessary, notify users that the database is being stopped.</b></li>
<li><b>Stop the database by using the <a href="http://docs.sun.com/doc/820-4497/stop-database-1?a=view"><tt>stop-database</tt>(1)</a> command.</b></li></ol><a name="ggorc"></a><h6>Example&#160;5-2 Stopping a Database</h6><p>The following example command stops Java DB on port 5001 of <tt>localhost</tt>:</p><pre>asadmin stop-database --dbhost=localhost --dbport=5001</pre><p>Information similar to the following is displayed:</p><pre>onnection obtained for host: localhost, port number 5001.
Apache Derby Network Server - 10.2.2.1 - (538595) shutdown at 2008-10-17 23:34:2
7.218 GMT
Command stop-database executed successfully.</pre><h6>Troubleshooting</h6><p>For a laptop that roams between networks, you might have trouble shutting down
the database. If you start Java DB and then change your IP
address, you will not be able to stop Java DB unless you add
a specific <tt>--dbhost</tt> argument. For example, if you run <tt>asadmin start-database <tt>--dbhost</tt> = 0.0.0.0</tt>, and then disconnect
Ethernet and switch to wifi, you should run a command similar to the
following to stop the database:</p><p><tt>asadmin stop-database <tt>--dbhost</tt> localhost</tt></p><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin stop-database <tt>--help</tt></tt>
at the command line.</p>

<a name="ghmbq"></a><h4>Java DB Utility Scripts</h4>
<a name="indexterm-164"></a><a name="indexterm-165"></a><p>The Java DB configuration that is available for use with Enterprise Server
includes scripts that can help you use Java DB. The following scripts are
available in the <i>as-install</i><tt>/javadb/frameworks/NetworkServer/bin</tt> directory:</p><dl><dt><tt>startNetworkServer,startNetworkServer.bat</tt></dt>
<dd><p>Script to start the network server</p></dd>
<dt><tt>stopNetworkServer,stopNetworkServer.bat</tt></dt>
<dd><p>Script to stop the network server</p></dd>
<dt><tt>ij,ij.bat</tt></dt>
<dd><p>Interactive JDBC scripting tool</p></dd>
<dt><tt>dblook,dblook.bat</tt></dt>
<dd><p>Script to view all or part of the DDL for a database</p></dd>
<dt><tt>sysinfo, sysinfo.bat</tt></dt>
<dd><p>Script to display versioning information about the Java DB environment</p></dd>
<dt><tt>NetworkServerControl,NetworkServerControl.bat</tt></dt>
<dd><p>Script to execute commands on the <tt>NetworkServerControl</tt> API  </p></dd>
</dl>


<a name="ghmbj"></a><h5>To Configure Your Environment to Run Java DB Utility Scripts</h5>
<ol>
<li><b>Ensure that the <tt>JAVA_HOME</tt> environment variable specifies the directory where the JDK is
installed.</b></li>
<li><b>Set the <tt>DERBY_HOME</tt> environment variable to point to the <i>as-install</i><tt>/javadb</tt> directory. </b></li></ol><h6>See Also</h6><p>For more information about these utilities, see the following documentation:</p>
<ul><li><p><b>Derby Tools and Utilities Guide</b> <a href="http://db.apache.org/derby/docs/10.1/tools/"></a></p></li>
<li><p><b>Derby Server and Administration Guide</b> (<a href="http://db.apache.org/derby/docs/10.1/adminguide/">http://db.apache.org/derby/docs/10.1/adminguide/</a>)</p></li></ul>


<a name="ggndx"></a><h3>Configuring Access to the Database</h3>
<a name="indexterm-166"></a><a name="indexterm-167"></a><p>After establishing the database, you are ready to set up access for
Enterprise Server applications. Before an application can access a database, the application must
get a connection. At runtime, the following sequence occurs when an application connects
to a database:</p>
<ol><li><p>The application gets the JDBC resource (data source) associated with the database by making a call through the JNDI API.</p><p>Using the JNDI name of the resource, the naming and directory service locates the JDBC resource. Each JDBC resource specifies a connection pool.</p></li>
<li><p>Using the JDBC resource, the application gets a database connection.</p><p>Enterprise Server retrieves a physical connection from the connection pool that corresponds to the database. The pool defines connection attributes such as the database name (URL), user name, and password.</p></li>
<li><p>After the database connection is established, the application can read, modify, and add data to the database.</p><p>The application accesses the database by making calls to the JDBC API. The JDBC driver translates the application&#8217;s JDBC calls into the protocol of the database server.</p></li>
<li><p>When the application is finished accessing the database, the application closes the connection and returns the connection to the connection pool.</p></li></ol>
<p>The following topics are addressed here:</p>
<ul><li><p><a href="#gharo">Administering JDBC Connection Pools</a></p></li>
<li><p><a href="#ggndp">Administering JDBC Resources</a></p></li>
<li><p><a href="#ghatb">Integrating the JDBC Driver</a></p></li></ul>


<a name="gharo"></a><h4>Administering JDBC Connection Pools</h4>
<a name="indexterm-168"></a><p>A <b>JDBC connection pool</b> is a group of reusable connections for a particular database. Because
creating each new physical connection is time consuming, Enterprise Server maintains a pool
of available connections. When an application requests a connection, it obtains one from the
pool. When an application closes a connection, the connection is returned to the
pool.</p><p>A JDBC resource is created by specifying the connection pool with which the
resource is associated. Multiple JDBC resources can specify a single connection pool. The
properties of connection pools can vary with different database vendors. Some common properties
are the database name (URL), the user name, and the password.</p><p>The following tasks and information are used to administer JDBC connection pools:</p>
<ul><li><p><a href="#ggnfv">To Create a JDBC Connection Pool</a></p></li>
<li><p><a href="#ggnby">To List JDBC Connection Pools</a></p></li>
<li><p><a href="#ggnwn">To Contact (Ping) a Connection Pool</a></p></li>
<li><p><a href="#ggngb">To Delete a JDBC Connection Pool</a></p></li></ul>


<a name="ggnfv"></a><h5>To Create a JDBC Connection Pool</h5>
<a name="indexterm-169"></a><a name="indexterm-170"></a><a name="indexterm-171"></a><a name="indexterm-172"></a><p>The remote <tt>create-jdbc-connection-pool</tt> command enables you to register a new JDBC connection pool
with the specified JDBC connection pool name. A JDBC connection pool or a
connector connection pool can be created with authentication. You can either use a
command option to specify user, password, or other connection information using the <tt>asadmin</tt>
utility, or specify the connection information in the XML descriptor file.</p><p>When you are building the connection pool, certain data specific to the JDBC
driver and the database vendor will be required. You can find some of
the following specifics in<a href="#beamw">Configuration Specifics for JDBC Drivers</a>:</p>
<ul><li><p>Database vendor name</p></li>
<li><p>Resource type, such as <tt>javax.sql.DataSource</tt> (local transactions only) <tt>javax.sql.XADataSource</tt> (global transactions)</p></li>
<li><p>Data source class name</p></li>
<li><p>Required properties, such as the database name (URL), user name, and password</p></li></ul>
<p>Creating a JDBC connection pool is a dynamic event and does not
require server restart. </p><h6>Before You Begin</h6><p>Before creating the connection pool, you must first install and integrate the database
and its associated JDBC driver. For instructions, see <a href="#ggkon">Setting Up the Database</a>.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Create the JDBC connection pool by using the <a href="http://docs.sun.com/doc/820-4497/create-jdbc-connection-pool-1?a=view"><tt>create-jdbc-connection-pool</tt>(1)</a> command.</b></li></ol><a name="ggrgh"></a><h6>Example&#160;5-3 Creating a JDBC Connection Pool</h6><p>The following example command creates a JDBC connection pool named <tt>sample_derby_pool</tt> on
<tt>localhost</tt>:</p><pre><tt><b>asadmin create-jdbc-connection-pool --datasourceclassname org.apache.derby.jdbc.ClientDataSource --restype javax.sql.XADataSource --property portNumber=1527:password=APP:user=APP:serverName= localhost:databaseName=sun-appserv-samples:connectionAttribut es=\;create\\=true sample_derby_pool</b></tt></pre><p>Information similar to the following is displayed:</p><pre>Command create-jdbc-connection-pool executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin create-jdbc-connection-pool <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnby"></a><h5>To List JDBC Connection Pools</h5>
<a name="indexterm-173"></a><a name="indexterm-174"></a><a name="indexterm-175"></a><a name="indexterm-176"></a><a name="indexterm-177"></a><a name="indexterm-178"></a><p>The remote <tt>list-jdbc-connection-pools</tt> command enables you to list all existing JDBC connection pools.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>List the JDBC connection pools by using the <a href="http://docs.sun.com/doc/820-4497/list-jdbc-connection-pools-1?a=view"><tt>list-jdbc-connection-pools</tt>(1)</a> command.</b></li></ol><a name="ggpcf"></a><h6>Example&#160;5-4 Listing JDBC Connection Pools</h6><p>The following example command lists the JDBC connection pools that are on <tt>localhost</tt>:</p><pre><tt><b>asadmin list-jdbc-connection-pools</b></tt></pre><p>Information similar to the following is displayed:</p><pre>sample_derby_pool2
poolA
__TimerPool
DerbyPool
sample_derby_pool
Command list-jdbc-connection-pools executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin list-jdbc-connection-pools <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnwn"></a><h5>To Contact (Ping) a Connection Pool</h5>
<a name="indexterm-179"></a><a name="indexterm-180"></a><a name="indexterm-181"></a><a name="indexterm-182"></a><a name="indexterm-183"></a><p>The remote <tt>ping-connection-pool</tt> command tests if a connection pool is usable. For example,
if you create a new JDBC connection pool for an application that is
expected to be deployed later, you can test the JDBC pool with this
command before the application is deployed. </p><h6>Before You Begin</h6><p>Before you can contact a connection pool, the connection pool must be created
with authentication, and the server or database must be running.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Ping a connection pool by using the <a href="http://docs.sun.com/doc/820-4497/ping-connection-pool-1?a=view"><tt>ping-connection-pool</tt>(1)</a> command.</b></li></ol><a name="ggpcs"></a><h6>Example&#160;5-5 Contacting a Connection Pool</h6><p>The following example command tests to see if the <tt>DerbyPool</tt> connection pool is
usable:</p><pre><tt><b>asadmin ping-connection-pool DerbyPool</b></tt></pre><p>Information similar to the following is displayed if the connection pool is usable:</p><pre>Command ping-connection-pool executed successfully</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin ping-connection-pool <tt>--help</tt></tt>
at the command line.</p>

<a name="ggngb"></a><h5>To Delete a JDBC Connection Pool</h5>
<a name="indexterm-184"></a><a name="indexterm-185"></a><a name="indexterm-186"></a><a name="indexterm-187"></a><a name="indexterm-188"></a><p>The remote <tt>delete-jdbc-connection-pool</tt> command enables you to delete an existing JDBC connection pool.
Deleting a JDBC connection pool is a dynamic event and does not require
server restart.</p><h6>Before You Begin</h6><p>Before deleting a JDBC connection pool, all associations to the resource must be
removed.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Obtain the exact name of the JDBC connection pool that you are deleting.</b><p>To list the existing JDBC connection pools:</p><pre><tt><b>asadmin list-jdbc-connection-pools</b></tt></pre></li>
<li><b>If necessary, notify users that the JDBC connection pool is being deleted.</b></li>
<li><b>Delete the connection pool by using the <a href="http://docs.sun.com/doc/820-4497/delete-jdbc-connection-pool-1?a=view"><tt>delete-jdbc-connection-pool</tt>(1)</a> command.</b></li></ol><a name="ggpis"></a><h6>Example&#160;5-6 Deleting a JDBC Connection Pool</h6><p>The following example command deletes the JDBC connection pool named <tt>DerbyPool</tt>:</p><pre><tt><b>asadmin delete-jdbc-connection-pool jdbc/DerbyPool</b></tt></pre><p>Information similar to the following is displayed if the connection pool is usable:</p><pre>Command delete-jdbc-connection-pool executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin delete-jdbc-connection-pool <tt>--help</tt></tt>
at the command line.</p>

<a name="ggndp"></a><h4>Administering JDBC Resources</h4>
<a name="indexterm-189"></a><a name="indexterm-190"></a><a name="indexterm-191"></a><p>A<b> JDBC resource</b>, also known as a data source, provides an application with a means
of connecting to a database. Typically, you create a JDBC resource for each
database that is accessed by the applications deployed in a domain. Multiple JDBC
resources can be specified for a database.</p><p>A JDBC resource is created by specifying the connection pool with which the
resource will be associated . Unse a unique Java Naming and Directory Interface
(JNDI)  name to identify the resource. For example, the JNDI name for
the resource of a payroll database might be <tt>java:comp/env/jdbc/payrolldb</tt>. </p><p>The following tasks and information are used to administer JDBC resources:</p>
<ul><li><p><a href="#ggnda">To Create a JDBC Resource</a></p></li>
<li><p><a href="#ggnhl">To List JDBC Resources</a></p></li>
<li><p><a href="#ggnhz">To Delete a JDBC Resource</a></p></li></ul>


<a name="ggnda"></a><h5>To Create a JDBC Resource</h5>
<a name="indexterm-192"></a><a name="indexterm-193"></a><a name="indexterm-194"></a><p>The remote <tt>create-jdbc-resource</tt> command enables you to create a JDBC resource. Creating a
JDBC resource is a dynamic event and does not require server restart.</p><p>Because all JNDI names are in the <tt>java:comp/env</tt> subcontext, when specifying the JNDI
name of a JDBC resource in the Administration Console, use only the <tt>jdbc/</tt><b>name</b>
format is used. For example, a payroll database might be specified as <tt>jdbc/payrolldb</tt>.</p><h6>Before You Begin</h6><p>Before creating a JDBC resource, you must first create a JDBC connection pool.
For instructions, see <a href="#ggnfv">To Create a JDBC Connection Pool</a>.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Create a JDBC resource by using the <a href="http://docs.sun.com/doc/820-4497/create-jdbc-resource-1?a=view"><tt>create-jdbc-resource</tt>(1)</a> command.</b></li>
<li><b>If necessary, notify users that the new resource has been created.</b></li></ol><a name="ggplj"></a><h6>Example&#160;5-7 Creating a JDBC Resource</h6><p>The following example command creates a JDBC resource named <tt>DerbyPool</tt>:</p><pre><tt><b>asadmin create-jdbc-resource --connectionpoolid DerbyPool jdbc/DerbyPool</b></tt></pre><p>Information similar to the following is displayed if the connection pool is usable:</p><pre>Command create-jdbc-resource executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin create-jdbc-resource <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnhl"></a><h5>To List JDBC Resources</h5>
<a name="indexterm-195"></a><a name="indexterm-196"></a><a name="indexterm-197"></a><a name="indexterm-198"></a><p>The remote <tt>list-jdbc-resources</tt> command enables you to list the existing JDBC resources.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>List JDBC resources by using the <a href="http://docs.sun.com/doc/820-4497/list-jdbc-resources-1?a=view"><tt>list-jdbc-resources</tt>(1)</a> command.</b></li></ol><a name="ggpgi"></a><h6>Example&#160;5-8 Listing JDBC Resources</h6><p>The following example command lists JDBC resources for <tt>localhost</tt>:</p><pre><tt><b>asadmin list-jdbc-resources</b></tt></pre><p>Information similar to the following is displayed:</p><pre>jdbc/__TimerPool
jdbc/DerbyPool
jdbc/__default
jdbc1
Command list-jdbc-resources executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin list-jdbc-resources <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnhz"></a><h5>To Delete a JDBC Resource</h5>
<a name="indexterm-199"></a><a name="indexterm-200"></a><a name="indexterm-201"></a><p>This remote command enables you to delete an existing JDBC resource. Deleting a
JDBC resource is a dynamic event and does not require server restart.</p><h6>Before You Begin</h6><p> Before deleting a JDBC resource, all associations with this resource must be
removed.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Obtain the exact name of the JDBC resource that you are deleting.</b><p>To list the existing JDBC resources:</p><pre><tt><b>asadmin list-jdbc-resources</b></tt></pre></li>
<li><b>If necessary, notify users that the JDBC resource is being deleted.</b></li>
<li><b>Delete a JDBC resource by using the <a href="http://docs.sun.com/doc/820-4497/delete-jdbc-resource-1?a=view"><tt>delete-jdbc-resource</tt>(1)</a> command.</b></li></ol><a name="ggpga"></a><h6>Example&#160;5-9 Deleting a JDBC Resource</h6><p>The following example command deletes a JDBC resource named <tt>DerbyPool</tt>:</p><pre><tt><b>asadmin delete-jdbc-resource jdbc/DerbyPool</b></tt></pre><p>Information similar to the following is displayed:</p><pre>Command delete-jdbc-resource executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin delete-jdbc-resource <tt>--help</tt></tt>
at the command line.</p>

<a name="ghatb"></a><h4>Integrating the JDBC Driver</h4>
<p>After setting up the connection pool and resources, integrate the JDBC driver in
either of the following ways:</p>
<ul><li><p>Make the driver accessible to the common class loader, and restart the domain.</p><p>Copy the driver&#8217;s JAR and ZIP files into the <i>domain-dir</i><tt>/lib</tt> directory, or copy its class files into the <i>domain-dir</i><tt>/lib/ext</tt> directory.</p></li>
<li><p>Identify the fully-qualified path name for the driver's JAR file.</p></li></ul>


<a name="beamw"></a><h3>Configuration Specifics for JDBC Drivers</h3>
<a name="indexterm-202"></a><a name="indexterm-203"></a><p>Enterprise Server is designed to support connectivity to any database management system by
using a corresponding JDBC driver. </p>
<ul><li><p><a href="#ghhvc">JDBC Drivers, Full Support </a></p></li>
<li><p><a href="#ghhvx">JDBC Drivers, Limited Support </a></p></li></ul>


<a name="ghhvc"></a><h4>JDBC Drivers, Full Support </h4>
<p>The following JDBC driver and database combinations have been tested and are supported
for container-managed persistence:</p>
<ul><li><p><a href="#beamy">Sun GlassFish JDBC Driver for DB2 Databases</a></p></li>
<li><p><a href="#beamz">Sun GlassFish JDBC Driver for Oracle 8.1.7 and 9.x Databases</a></p></li>
<li><p><a href="#beana">Sun GlassFish JDBC Driver for Microsoft SQL Server Databases</a></p></li>
<li><p><a href="#beanb">Sun GlassFish JDBC Driver for Sybase Databases</a></p></li>
<li><p><a href="#beanc">IBM DB2 Type 2 Driver</a></p></li>
<li><p><a href="#beamx">Java DB/Derby Type 4 Driver</a></p></li>
<li><p><a href="#beand">JConnect Type 4 Driver for Sybase ASE 12.5 Databases</a></p></li>
<li><p><a href="#gbsok">MM MySQL Type 4 Driver (Non-XA)</a></p></li></ul>
<p>To see the most current list of supported JDBC drivers, refer to
the <a href="http://docs.sun.com/doc/820-4494"><i>Sun GlassFish Enterprise Server v3 Prelude Release Notes</i></a>.</p>

<a name="beamy"></a><h5>Sun GlassFish JDBC Driver for DB2 Databases</h5>
<a name="indexterm-204"></a><p>The JAR files for this driver are <tt>smbase.jar</tt>, <tt>smdb2.jar</tt>, and <tt>smutil.jar</tt>. Configure
the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> DB2</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.sun.sql.jdbcx.db2.DB2DataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li></ul>
</li>
<li><p><b>URL:</b> <tt>jdbc:sun:db2://</tt><i>serverName</i><tt>:</tt><i>portNumber</i><tt>;databaseName=</tt><i>databaseName</i></p></li></ul>


<a name="beamz"></a><h5>Sun GlassFish JDBC Driver for Oracle 8.1.7 and 9.x Databases</h5>
<a name="indexterm-205"></a><p>The JAR files for this driver are <tt>smbase.jar</tt>, <tt>smoracle.jar</tt>, and <tt>smutil.jar</tt>. Configure
the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Oracle</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.sun.sql.jdbcx.oracle.OracleDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>SID</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li></ul>
</li>
<li><p><b>URL:</b> <tt>jdbc:sun:oracle://</tt><i>serverName</i><tt>[:</tt><i>portNumber</i><tt>][;SID=</tt><i>databaseName</i><tt>]</tt></p></li></ul>


<a name="beana"></a><h5>Sun GlassFish JDBC Driver for Microsoft SQL Server Databases</h5>
<a name="indexterm-206"></a><p>The JAR files for this driver are <tt>smbase.jar</tt>, <tt>smsqlserver.jar</tt>, and <tt>smutil.jar</tt>. Configure
the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Microsoft SQL Server</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.sun.sql.jdbcx.sqlserver.SQLServerDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address and the port of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>selectMethod</b></tt> &#8211; Set to <tt>cursor</tt>.</p></li></ul>
</li>
<li><p><b>URL:</b> <tt>jdbc:sun:sqlserver://</tt><i>serverName</i><tt>[:</tt><i>portNumber</i><tt>]</tt></p></li></ul>


<a name="beanb"></a><h5>Sun GlassFish JDBC Driver for Sybase Databases</h5>
<a name="indexterm-207"></a><p>The JAR files for this driver are <tt>smbase.jar</tt>, <tt>smsybase.jar</tt>, and <tt>smutil.jar</tt>. Configure
the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Sybase</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.sun.sql.jdbcx.sybase.SybaseDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate. This is optional.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li></ul>
</li>
<li><p><b>URL:</b> <tt>jdbc:sun:sybase://</tt><i>serverName</i><tt>[:</tt><i>portNumber</i><tt>]</tt></p></li></ul>


<a name="beanc"></a><h5>IBM DB2 Type 2 Driver</h5>
<a name="indexterm-208"></a><p>The JAR files for the DB2 driver are <tt>db2jcc.jar</tt>, <tt>db2jcc_license_cu.jar</tt>, and <tt>db2java.zip</tt>.
Set your environment variables . For example:</p><pre>LD_LIBRARY_PATH=/usr/db2user/sqllib/lib:${j2ee.home}/lib
DB2DIR=/opt/IBM/db2/V8.2
DB2INSTANCE=db2user
INSTHOME=/usr/db2user
VWSPATH=/usr/db2user/sqllib
THREADS_FLAG=native</pre><p>Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> DB2</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.ibm.db2.jcc.DB2SimpleDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>databaseName</b></tt> - Set as appropriate.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>driverType</b></tt> &#8211; Set to <tt>2</tt>.</p></li>
<li><p><tt><b>deferPrepares</b></tt> &#8211; Set to <tt>false</tt>.</p></li></ul>
</li></ul>


<a name="beamx"></a><h5>Java DB/Derby Type 4 Driver</h5>
<a name="indexterm-209"></a><a name="indexterm-210"></a><p>The JAR file for the Java DB/Derby driver is <tt>derbyclient.jar</tt>. (Java DB is
based upon Apache Derby.) Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Java DB/Derby</p></li>
<li><p><b>DataSource Classname:</b> Specify one of the following:</p><pre>org.apache.derby.jdbc.ClientDataSource
org.apache.derby.jdbc.ClientXADataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server if it is different from the default.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Specify the name of the database.</p></li>
<li><p><tt><b>user</b></tt> - Specify the database user.</p><p>This is only necessary if Derby is configured to use authentication. Derby does <b>not</b> use authentication by default. When the user is provided, it is the name of the schema where the tables reside.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Specify the database password.</p><p>This is only necessary if Java DB/Derby is configured to use authentication.</p></li></ul>
</li>
<li><p><b>URL:</b> <tt>jdbc:derby://</tt><i>serverName</i><tt>:</tt><i>portNumber</i><tt>/</tt><i>databaseName</i><tt>;create=true</tt></p><p>Include the <tt>;create=true</tt> part only if you want the database to be created if it does not exist.</p></li></ul>


<a name="beand"></a><h5>JConnect Type 4 Driver for Sybase ASE 12.5 Databases</h5>
<a name="indexterm-211"></a><p>The JAR file for the Sybase driver is <tt>jconn2.jar</tt>. Configure the connection pool
using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Sybase</p></li>
<li><p><b>DataSource Classname:</b> Specify one of the following:</p><pre>com.sybase.jdbc2.jdbc.SybDataSource
com.sybase.jdbc2.jdbc.SybXADataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate. Do not specify the complete URL, only the database name.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>BE_AS_JDBC_COMPLIANT_AS_POSSIBLE</b></tt> &#8211; Set to <tt>true</tt>.</p></li>
<li><p><tt><b>FAKE_METADATA</b></tt> &#8211; Set to <tt>true</tt>.</p></li></ul>
</li></ul>


<a name="gbsok"></a><h5>MM MySQL Type 4 Driver (Non-XA)</h5>
<a name="indexterm-212"></a><p>The JAR file for the MySQL driver is <tt>mysql-connector-java-</tt><i>version</i><tt>-bin-g.jar</tt>, for example, <tt>mysql-connector-java-3.1.12-bin-g.jar</tt>.
Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Microsoft SQL Server</p></li>
<li><p><b>DataSource Classname:</b> Specify one of the following:</p><pre>com.mysql.jdbc.jdbc2.optional.MysqlDataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>URL</b></tt> &#8211; If you are using global transactions, you can set this property instead of <tt>serverName</tt>, <tt>port</tt>, and <tt>databaseName</tt>.</p><p>The MM MySQL Type 4 driver doesn&#8217;t provide a method to set the required <tt>relaxAutoCommit</tt> property, so you must set it indirectly by setting the <tt><b>URL</b></tt> property:</p><pre>jdbc:mysql://<i>host</i>:<i>port</i>/<i>database</i>?relaxAutoCommit="true"</pre></li></ul>
</li></ul>


<a name="ghhvx"></a><h4>JDBC Drivers, Limited Support </h4>
<p>The following JDBC drivers can also be used with Enterprise Server, but have
not been fully tested. Although Sun offers no product support for these drivers,
Sun does offer limited support for the use of these drivers with
Enterprise Server:</p>
<ul><li><p><a href="#ghgft">CloudScape 5.1 Type 4 Driver</a></p></li>
<li><p><a href="#beanj">IBM Informix Type 4 Driver</a></p></li>
<li><p><a href="#beane">Inet Oraxo JDBC Driver for Oracle 8.1.7 and 9.x Databases</a></p></li>
<li><p><a href="#beanf">Inet Merlia JDBC Driver for Microsoft SQL Server Databases</a></p></li>
<li><p><a href="#beang">Inet Sybelux JDBC Driver for Sybase Databases</a></p></li>
<li><p><a href="#gbsor">MM MySQL Type 4 Driver (XA Only)</a></p></li>
<li><p><a href="#beani">OCI Oracle Type 2 Driver for Oracle 8.1.7 and 9.x Databases</a></p></li>
<li><p><a href="#beanh">Oracle Thin Type 4 Driver for Oracle 8.1.7 and 9.x Databases</a></p></li></ul>

<hr><p><b>Note - </b>An Oracle database user running the <tt>capture-schema</tt> command needs ANALYZE ANY TABLE privileges
if that user does not own the schema. These privileges are granted to
the user by the database administrator. For information about <tt>capture-schema</tt>, see <a href="http://docs.sun.com/doc/820-4497"><i>Sun GlassFish Enterprise Server v3 Prelude Reference Manual</i></a>.</p>
<hr>


<a name="ghgft"></a><h5>CloudScape 5.1 Type 4 Driver</h5>
<a name="indexterm-213"></a><p>The JAR files for the CloudScape driver are <tt>db2j.jar</tt>, <tt>db2jtools.jar</tt>, <tt>db2jcview.jar</tt>, <tt>jh.jar</tt>,
<tt>db2jcc.jar</tt>, and <tt>db2jnet.jar</tt>. Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Cloudscape</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.ibm.db2.jcc.DB2DataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate.</p></li></ul>
</li></ul>


<a name="beanj"></a><h5>IBM Informix Type 4 Driver</h5>
<a name="indexterm-214"></a><p>Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Informix</p></li>
<li><p><b>DataSource Classname:</b> Specify one of the following:</p><pre>com.informix.jdbcx.IfxDataSource
com.informix.jdbcx.IfxXADataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the Informix database server name.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate. This is optional.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>IfxIFXHost</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li></ul>
</li></ul>


<a name="beane"></a><h5>Inet Oraxo JDBC Driver for Oracle 8.1.7 and 9.x Databases</h5>
<a name="indexterm-215"></a><a name="indexterm-216"></a><p>The JAR file for the Inet Oracle driver is <tt>Oranxo.jar</tt>. Configure the connection
pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Oracle</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.inet.ora.OraDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Specify the database user.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Specify the database password.</p></li>
<li><p><tt><b>serviceName</b></tt> &#8211; Specify the URL of the database. The syntax is as follows:</p><pre>jdbc:inetora:<i>server</i>:<i>port</i>:<i>dbname</i></pre><p>For example:</p><pre>jdbc:inetora:localhost:1521:payrolldb</pre><p>In this example,<tt>localhost</tt> is the name of the host running the Oracle server, <tt>1521</tt> is the Oracle server&#8217;s port number, and <tt>payrolldb</tt> is the SID of the database. For more information about the syntax of the database URL, see the Oracle documentation.</p></li>
<li><p><tt><b>streamstolob</b></tt> - If the size of BLOB or CLOB data types exceeds 4 KB and this driver is used for CMP, this property must be set to <tt>true</tt>.</p></li>
<li><p><tt><b>xa-driver-does-not-support-non-tx-operations</b></tt> - Set to the value <tt>true</tt>. Only needed if both non-XA and XA connections are retrieved from the same connection pool. Might degrade performance.</p><p>As an alternative to setting this property, you can create two connection pools, one for non-XA connections and one for XA connections.</p></li></ul>
</li></ul>


<a name="beanf"></a><h5>Inet Merlia JDBC Driver for Microsoft SQL Server Databases</h5>
<a name="indexterm-217"></a><a name="indexterm-218"></a><p>The JAR file for the Inet Microsoft SQL Server driver is <tt>Merlia.jar</tt>.
Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Microsoft SQL Server</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.inet.tds.TdsDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address and the port of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li></ul>
</li></ul>


<a name="beang"></a><h5>Inet Sybelux JDBC Driver for Sybase Databases</h5>
<a name="indexterm-219"></a><a name="indexterm-220"></a><p>The JAR file for the Inet Sybase driver is <tt>Sybelux.jar</tt>. Configure the connection
pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Sybase</p></li>
<li><p><b>DataSource Classname:</b> <tt>com.inet.syb.SybDataSource</tt></p></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate. Do not specify the complete URL, only the database name.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li></ul>
</li></ul>


<a name="gbsor"></a><h5>MM MySQL Type 4 Driver (XA Only)</h5>
<a name="indexterm-221"></a><p>The JAR file for the MySQL<sup>TM</sup> driver is <tt>mysql-connector-java-</tt><i>version</i><tt>-bin-g.jar</tt>, for example, <tt>mysql-connector-java-3.1.12-bin-g.jar</tt>. Configure the
connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Microsoft SQL Server</p></li>
<li><p><b>DataSource Classname:</b> </p><pre>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>serverName</b></tt> &#8211; Specify the host name or IP address of the database server.</p></li>
<li><p><tt><b>portNumber</b></tt> &#8211; Specify the port number of the database server.</p></li>
<li><p><tt><b>databaseName</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>URL</b></tt> &#8211; If you are using global transactions, you can set this property instead of <tt>serverName</tt>, <tt>port</tt>, and <tt>databaseName</tt>.</p><p>The MM MySQL Type 4 driver doesn&#8217;t provide a method to set the required <tt>relaxAutoCommit</tt> property, so you must set it indirectly by setting the <tt>URL</tt> property:</p><pre>jdbc:mysql://<i>host</i>:<i>port</i>/<i>database</i>?relaxAutoCommit="true"</pre></li></ul>
</li></ul>


<a name="beani"></a><h5>OCI Oracle Type 2 Driver for Oracle 8.1.7 and 9.x Databases</h5>
<a name="indexterm-222"></a><p>The JAR file for the OCI Oracle driver is <tt>ojdbc14.jar</tt>. Make sure that
the shared library is available through <tt>LD_LIBRARY_PATH</tt> and that the <tt>ORACLE_HOME</tt> property is
set. Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Oracle</p></li>
<li><p><b>DataSource Classname: </b>Specify one of the following:</p><pre>oracle.jdbc.pool.OracleDataSource
oracle.jdbc.xa.client.OracleXADataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>URL</b></tt> &#8211; Specify the complete database URL using the following syntax:</p><pre>jdbc:oracle:oci:[<i>user</i>/<i>password</i>]@<i>host</i>[:<i>port</i>]/<i>service</i></pre><p>For example:</p><pre>jdbc:oracle:oci:@localhost:1521:customer_db</pre></li>
<li><p><tt><b>xa-driver-does-not-support-non-tx-operations</b></tt> - Set to the value <tt>true</tt>. Only needed if both non-XA and XA connections are retrieved from the same connection pool. Might degrade performance.</p><p>As an alternative to setting this property, you can create two connection pools, one for non-XA connections and one for XA connections.</p></li></ul>
</li></ul>


<a name="beanh"></a><h5>Oracle Thin Type 4 Driver for Oracle 8.1.7 and 9.x Databases</h5>
<a name="indexterm-223"></a><p>The JAR file for the Oracle driver is <tt>ojdbc14.jar</tt>. </p>
<hr><p><b>Note - </b>When using this driver, keep in mind that you cannot insert more than
2000 bytes of data into a column. To circumvent this problem, use
the OCI driver (JDBC type 2).</p>
<hr>
<p>Configure the connection pool using the following settings:</p>
<ul><li><p><b>Name:</b> Use this name when you configure the JDBC resource later.</p></li>
<li><p><b>Resource Type:</b> Specify the appropriate value.</p></li>
<li><p><b>Database Vendor:</b> Oracle</p></li>
<li><p><b>DataSource Classname:</b> Specify one of the following:</p><pre>oracle.jdbc.pool.OracleDataSource
oracle.jdbc.xa.client.OracleXADataSource</pre></li>
<li><p><b>Properties:</b></p>
<ul><li><p><tt><b>user</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>password</b></tt> &#8211; Set as appropriate.</p></li>
<li><p><tt><b>URL</b></tt> &#8211; Specify the complete database URL using the following syntax:</p><pre>jdbc:oracle:thin:[<i>user</i>/<i>password</i>]@<i>host</i>[:<i>port</i>]/<i>service</i></pre><p>For example:</p><pre>jdbc:oracle:thin:@localhost:1521:customer_db</pre></li>
<li><p><tt><b>xa-driver-does-not-support-non-tx-operations</b></tt> - Set to the value <tt>true</tt>. Optional: only needed if both non-XA and XA connections are retrieved from the same connection pool. Might degrade performance.</p><p>As an alternative to setting this property, you can create two connection pools, one for non-XA connections and one for XA connections.</p></li></ul>

<hr><p><b>Note - </b><a name="indexterm-224"></a>For the Oracle thin driver, the <tt>XAResource.recover</tt> method repeatedly returns the same set of in-doubt Xids regardless of the input flag. According to the XA specifications, the Transaction Manager initially calls this method with TMSTARTSCAN and then with TMNOFLAGS repeatedly until no Xids are returned. The <tt>XAResource.commit</tt> method also has some issues.</p><p>To disable this Enterprise Server workaround, the <a name="indexterm-225"></a><tt>oracle-xa-recovery-workaround</tt> property value must be set to <tt>false</tt>. </p>
<hr>
</li></ul>



<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p7.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p9.html">Next</a></td>
</tr>
</table>



</body>
</html>

