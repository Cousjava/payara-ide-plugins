<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<!-- GenHTML revision 23224-->
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Extending Enterprise Server - Sun GlassFish Enterprise Server v3 Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-11-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p13.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p15.html">Next</a></td>
</tr>
</table>


<a name="ghapp"></a>Chapter&#160;10<h3>Extending Enterprise Server</h3><a name="indexterm-401"></a><a name="indexterm-402"></a><p>This chapter provides procedures for performing tasks associated with extending and updating the
deployed Sun GlassFish<sup>TM</sup>Enterprise Server v3 by using Update Tool. Procedures for using the <tt>pkg</tt>
command are contained in this chapter. A set of reference pages that contain
details on using the <tt>pkg</tt> command is included with Enterprise Server. </p><p>The following topics are addressed here:</p>
<ul><li><p><a href="#ghypr">About Add-on Components</a></p></li>
<li><p><a href="#ghjhp">Adding Components</a></p></li>
<li><p><a href="#ghjlp">Updating Installed Components</a></p></li>
<li><p><a href="#ghmws">Removing Installed Components</a></p></li></ul>
<p>Instructions for accomplishing the tasks in this chapter by using the Administration Console
are contained in the Administration Console online help for Update Tool. The standalone
Update Tool also contains online help.<a name="indexterm-403"></a> For additional information about Update Tool,
see <a href="http://wikis.sun.com/display/IpsBestPractices/Screenshots">http://wikis.sun.com/display/IpsBestPractices/Screenshots</a></p>

<a name="ghypr"></a><h3>About Add-on Components</h3>
<p>Enterprise Server is designed to provide its functionality in a modular form so
that you can choose to include the functionality that you need and leave
out the functionality that is not needed. <b>OSGi modules</b>, also called bundles, provide add-on
functionality for your deployed Enterprise Server. You can add or remove an add-on
component during runtime, with no need to restart the server. <a name="indexterm-404"></a><a name="indexterm-405"></a><a name="indexterm-406"></a><a name="indexterm-407"></a><a name="indexterm-408"></a><a name="indexterm-409"></a></p><p>Over time, new add-on components will be developed and existing components will be
modified. The modules that are available in this release are listed in <b>Broken Link (Target ID: GIQZY)</b>.</p><p>Enterprise Server provides a set of image packaging system (IPS) tools for updating
software on a deployed server. You can install new or updated add-on components
by using the Update Tool in the following ways:<a name="indexterm-410"></a></p>
<ul><li><p>As a selection in the graphical Enterprise Server Administration Console</p></li>
<li><p>As a standalone graphical tool which can be started from the command line using the following format: <i>as-install-parent</i><tt>/bin/updatetool</tt></p></li>
<li><p>As a command-line utility (the <tt>pkg</tt> command) which can perform most of the tasks offered by the graphical Update Tool. The main reasons for using the <tt>pkg</tt> command are:</p>
<ul><li><p>As a basis for creating update scripts</p></li>
<li><p>As a method for working with systems that do not have a monitor, graphic card, or keyboard (headless systems)<a name="indexterm-411"></a></p></li></ul>
</li></ul>
<p>Extensive online help is provided for both graphical versions.</p>

<a name="ghjhp"></a><h3>Adding Components</h3>
<p>This section provides instructions for using the <tt>pkg</tt> command to install Enterprise Server
add-on components on your deployed Enterprise Server.</p>

<a name="ghhnh"></a><h4>To Install an Add-on Component</h4><p><a name="indexterm-412"></a><a name="indexterm-413"></a><a name="indexterm-414"></a><a name="indexterm-415"></a>The <tt>pkg</tt> command enables you to install an add-on component on your
system. If multiple versions of a package are available, the latest one is
applied unless you specify otherwise. The <tt>pkg</tt> command, located in the <i>as-install-parent</i><tt>/bin</tt> directory, </p>
<hr><p><b>Note - </b>If the <tt>pkg</tt> component, the <tt>updatetool</tt> component, or any other valid component that
you try to invoke from the command line is not yet installed on
your deployed Enterprise Server, you will receive a query asking if you want
to install the component. Answer Y to install the component.</p>
<hr>
<h6>Before You Begin</h6><p> Enterprise Server v3 must be fully deployed before you can install additional
components. If you need installation instructions, see <a href="http://docs.sun.com/doc/820-7690"><i>Sun GlassFish Enterprise Server v3 Installation Guide</i></a>.</p><ol>
<li><b>List your installed components:</b><pre><tt><b>pkg list</b></tt></pre><p>Information similar to the following is displayed:</p><pre>NAME (AUTHORITY)                              VERSION         STATE      UFIX
glassfishv3-common                            0-1             installed  ----
glassfishv3-ejb                               0-1             installed  u---
glassfishv3-nucleus                           0-1             installed  ----
glassfishv3-web                               0-1             installed  ----
grails                                        1.0-1.0         installed  ----
jersey                                        0.7-0.1         installed  u---
jmaki                                         1.8.0-1.0       installed  ----
jruby                                         1.1.1-1.0       installed  ----
metro                                         1.2-1           installed  u---
pkg                                           0.1.4-6.564     installed  u---
python2.4-minimal                             2.4.4-6.564     installed  u---
updatetool (glassfish.org)                    2.0-6.564       installed  u---
wxpython2.8-minimal                           2.8.7.1-6.564   installed  u---</pre></li>
<li><b>List all packages that are available:</b><pre><tt><b>pkg list -a</b></tt></pre><p>Information similar to the following is displayed from the repository:</p><pre>NAME (AUTHORITY)                              VERSION         STATE      UFIX
glassfishv3-common                            0-1             known      u---
glassfishv3-common                            0-1             known      u---
glassfishv3-common                            0-1             installed  ----
glassfishv3-ejb                               0-1             known      u---
glassfishv3-ejb                               0-1             known      u---
glassfishv3-ejb                               0-1             known      u---
glassfishv3-ejb                               0-1             installed  u---
glassfishv3-ejb                               0-1             known      ----
glassfishv3-nucleus                           0-1             known      u---
glassfishv3-nucleus                           0-1             known      u---
glassfishv3-nucleus                           0-1             installed  ----
glassfishv3-web                               0-1             known      u---
glassfishv3-web                               0-1             known      u---
glassfishv3-web                               0-1             installed  ----
grails                                        1.0-1.0         installed  ----
javadb                                        0-1             known      u---
javadb                                        0-1             known      u---
javadb                                        0-1             known      ----
jersey                                        0.7-0.1         installed  u---
jersey                                        0.7-0.2         known      u---
jersey                                        0.7-0.3         known      u---
jersey                                        0.8-0.1         known      ----
jmaki                                         1.8.0-1.0       installed  ----
jruby                                         1.1.1-1.0       installed  ----
metro                                         1.2-1           installed  u---
metro                                         1.2-2           known      u---
metro                                         1.2-3           known      ----
pkg                                           0.1.4-6.564     installed  u---
pkg                                           0.1.5-8.724     known      ----
python2.4-minimal                             2.4.4-6.564     installed  u---
python2.4-minimal                             2.4.4-8.724     known      ----
updatetool                                    2.0-6.564       installed  u---
updatetool                                    2.0-8.724       known      ----
wxpython2.8-minimal                           2.8.7.1-6.564   installed  u---
wxpython2.8-minimal                           2.8.7.1-8.724   known      ----</pre></li>
<li><b>Navigate to the <i>as-install</i> directory.</b></li>
<li><b>Install a package from the available packages list.</b><p>Use the following syntax: <tt>pkg install</tt> <i>package-name</i>. For example:</p><pre><tt><b>pkg install javadb</b></tt></pre><p>The most recent version of the component is installed and information similar to
the following is displayed:</p><pre>DOWNLOAD                                     PKGS       FILES     XFER (MB)
javadb                                       0/1      61/200     2.10/7.26 

PHASE                                        ACTIONS
Install Phase                                222/222 </pre></li>
<li><b>To apply your changes, restart Enterprise Server.</b><p>See <a href="p7.html#ginqj">To Restart a Domain</a>.</p></li></ol><h6>See Also</h6><p>Full syntax and options for using the <tt>pkg</tt> command are described in the
pages in the <i>as-install</i><tt>/pkg/man/</tt> directory. These reference pages are not displayed by using
the <tt>man</tt> command. Instead, use a command such as <tt>more</tt> or <tt>cat</tt>.</p>

<a name="ghjlp"></a><h3>Updating Installed Components</h3>
<p>This section provides the following instructions for updating Enterprise Server components after they
have been installed:</p>
<ul><li><p><a href="#ghhnc">To Update an Installed Component</a></p></li>
<li><p><a href="#ghhmw">To Update All Installed Components in an Image</a></p></li></ul>


<a name="ghhnc"></a><h4>To Update an Installed Component</h4><a name="indexterm-416"></a><a name="indexterm-417"></a><a name="indexterm-418"></a><p>When you install an updated version of a component, only those files that
have been modified are downloaded and installed. Files that have been removed in
the updated package are removed during the update process.</p><ol>
<li><b>Obtain a list of only the installed packages that have available updates:</b><pre><tt><b>pkg list -u</b></tt></pre><p>Information similar to the following is displayed:</p><pre>NAME (AUTHORITY)                              VERSION         STATE      UFIX
glassfishv3-ejb                               0-1             installed  u---
jersey                                        0.7-0.1         installed  u---
metro                                         1.2-1           installed  u---
pkg                                           0.1.4-6.564     installed  u---
python2.4-minimal                             2.4.4-6.564     installed  u---
updatetool (glassfish.org)                    2.0-6.564       installed  u---
wxpython2.8-minimal                           2.8.7.1-6.564   installed  u---</pre></li>
<li><b>Install a new version of a package. </b><p>Use the following syntax: <tt>pkg install</tt> <i>package-name</i>. For example:</p><pre><tt><b>pkg install metro</b></tt></pre><p>Information similar to the following is displayed:</p><pre>DOWNLOAD                                     PKGS       FILES     XFER (MB)
Completed                                    1/1         5/5     0.49/0.49 

PHASE                                        ACTIONS
Removal Phase                                    2/2 
Update Phase                                     7/7 
Install Phase                                    2/2</pre></li>
<li><b>To apply your changes, restart Enterprise Server.</b><p>See <a href="p7.html#ginqj">To Restart a Domain</a>.</p></li></ol><h6>See Also</h6><p>Full syntax and options for using the <tt>pkg</tt> command are described in the
pages in the <i>as-install</i> <tt>/pkg/man/</tt> directory. These reference pages are not displayed by
using the <tt>man</tt> command. Instead, use a command such as <tt>more</tt> or <tt>cat</tt>.</p>

<a name="ghhmw"></a><h4>To Update All Installed Components in an Image</h4><a name="indexterm-419"></a><a name="indexterm-420"></a><a name="indexterm-421"></a><p>Enterprise Server enables you to maintain multiple installation images on a single system.
When you update an installation image, all the components that are present in
that image are updated to new versions, if new versions are available. When
you install updated versions of components, only those files that have been modified
are downloaded and installed. Files that have been removed in the updated package
are removed during the update process.</p><ol>
<li><b>Install all packages for the image. </b><p>Use the following syntax: <tt>pkg install</tt> <i>image-name</i>. For example:</p><pre><tt><b>pkg image-update</b></tt></pre><p>Information similar to the following is displayed:</p><pre>DOWNLOAD                                     PKGS       FILES     XFER (MB)
Completed                                    6/6     729/729   21.59/21.59 

PHASE                                        ACTIONS

Removal Phase                                887/887 
Update Phase                                 253/253 
Install Phase                                584/584 </pre></li>
<li><b>To apply your changes, restart Enterprise Server.</b><p>See <a href="p7.html#ginqj">To Restart a Domain</a>.</p></li></ol><h6>See Also</h6><p>Full syntax and options for using the <tt>pkg</tt> command are described in the
pages in the <i>as-install</i> <tt>/pkg/man/</tt> directory. These reference pages are not displayed by
using the <tt>man</tt> command. Instead, use a command such as <tt>more</tt> or <tt>cat</tt>.</p>

<a name="ghmws"></a><h3>Removing Installed Components</h3>
<a name="indexterm-422"></a><a name="indexterm-423"></a><p>If you are discontinuing use of a component and want to remove
it from your system, you can do this by using the <tt>uninstall</tt> command. If
you need to revert to a prior version of a component, you
will need to uninstall the current version and install the prior version by
specifying the version number.</p>
<ul><li><p><a href="#ghhkg">To Uninstall an Installed Component</a></p></li>
<li><p><a href="#ghmvt">To Uninstall and Revert to an Older Version of a Component</a></p></li></ul>


<a name="ghhkg"></a><h4>To Uninstall an Installed Component</h4><a name="indexterm-424"></a><a name="indexterm-425"></a><h6>Before You Begin</h6><p>Verify that there are no dependencies on the installed component before removing it.</p><ol>
<li><b>Obtain a list of all your installed components:</b><pre><tt><b>pkg list</b></tt></pre><pre>NAME (AUTHORITY)                              VERSION         STATE      UFIX
glassfishv3-common                            0-1             installed  ----
glassfishv3-ejb                               0-1             installed  u---
glassfishv3-nucleus                           0-1             installed  ----
glassfishv3-web                               0-1             installed  ----
grails                                        1.0-1.0         installed  ----
jersey                                        0.7-0.1         installed  u---
jmaki                                         1.8.0-1.0       installed  ----
jruby                                         1.1.1-1.0       installed  ----
metro                                         1.2-1           installed  u---
pkg                                           0.1.4-6.564     installed  u---
python2.4-minimal                             2.4.4-6.564     installed  u---
updatetool (glassfish.org)                    2.0-6.564       installed  u---
wxpython2.8-minimal                           2.8.7.1-6.564   installed  u---</pre></li>
<li><b>Uninstall the component that you want removed from your system. </b><p>Use the following syntax: <tt>pkg uninstall</tt> <i>package-name</i>. For example:</p><pre><tt><b>pkg uninstall jruby</b></tt></pre></li>
<li><b>To apply your changes, restart Enterprise Server.</b><p>See <a href="p7.html#ginqj">To Restart a Domain</a>.</p></li></ol><h6>See Also</h6><p>Full syntax and options for using the <tt>pkg</tt> command are described in the
pages in the <i>as-install</i> <tt>/pkg/man/</tt> directory. These reference pages are not displayed by
using the <tt>man</tt> command. Instead, use a command such as <tt>more</tt> or <tt>cat</tt>.</p>

<a name="ghmvt"></a><h4>To Uninstall and Revert to an Older Version of a Component</h4><p>If there is a malfunction in an installed component, you might want to
revert to an older version of that component. The way to restore
an older version of a component is to first uninstall the current version
of the component, then install the specific older version that you want to
reinstate. </p><h6>Before You Begin</h6><p>Be sure to verify that the older version of the component is
in the repository before you uninstall your current version.</p><ol>
<li><b>Verify that the older version of the component is still available:</b><pre><tt><b>pkg list -a</b></tt></pre></li>
<li><b>Obtain a list of your installed components:</b><pre><tt><b>pkg list</b></tt></pre></li>
<li><b>Uninstall the currently-installed component that you want to replace. </b><p>Use the following syntax: <tt>pkg uninstall</tt> <i>package-name</i>. For example:</p><pre><tt><b>pkg uninstall jersey</b></tt></pre></li>
<li><b>Install the older version of the component.</b><p>Use the following syntax: <tt>pkg install</tt> <i>package-name</i><tt> &#8212;version</tt> <i>version-number</i>. For example:</p><pre><tt><b>pkg install jersey -version 0.7-0.2</b></tt></pre></li>
<li><b>Verify that the older version is installed:</b><pre><tt><b>pkg list</b></tt></pre></li></ol><h6>See Also</h6><p>Full syntax and options for using the <tt>pkg</tt> command are contained in the
pages in the <i>as-install</i> <tt>/pkg/man/</tt> directory. These reference pages are not displayed by
using the <tt>man</tt> command. Instead, use a command such as <tt>more</tt> or <tt>cat</tt>.</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p13.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p15.html">Next</a></td>
</tr>
</table>



</body>
</html>

