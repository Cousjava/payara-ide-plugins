<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Developing Applications for GlassFish Server from Eclipse IDE - GlassFish Tools Bundle for Eclipse User Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-05-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p5.html">Previous</a></td>
<td></td>
<td></td>
<td><a href="p7.html">Next</a></td>
</tr>
</table>


<a name="chapter3"></a>Chapter&#160;4<h3>Developing Applications for GlassFish Server from Eclipse IDE</h3><p>This section of the document helps you to get familiar with developing applications
for GlassFish Server with Eclipse IDE, using the advanced features available in GlassFish
Server v3 Prelude.</p><p>The following topics assume GlassFish Server v3 Prelude as Server runtime. You can
use GlassFish Server v2.1 for developing applications but without support for the features
that are specific to v3 Prelude. You may also need to perform further
configuration, for the following tasks to work with GlassFish Server v2.1.</p><p>For example: Use of <tt>EclipseLink</tt> described in <a href="#task-9">To create a new Data Source and register it with GlassFish Server</a>, is preconfigured to work with
GlassFish Server v3 Prelude but not with GlassFish Server v2.1.</p>

<a name="to-develop"></a><h3></h3>

<ul><li><p><a href="#task-5">To create a new Web Application project for GlassFish Server</a></p></li>
<li><p><a href="#task-6">To add a Servlet and use Session Preservation feature</a></p></li>
<li><p><a href="#task-7">To debug a Servlet with GlassFish Server</a></p></li>
<li><p><a href="#task-8">To use the preconfigured MySQL Database Connector with GlassFish Server</a></p></li>
<li><p><a href="#task-9">To create a new Data Source and register it with GlassFish Server</a></p></li>
<li><p><a href="#task-10">To create a JPA Project for GlassFish Server</a></p></li></ul>


<a name="task-5"></a><h4>To create a new Web Application project for GlassFish Server</h4><p>You can create different types of applications using GlassFish Tools Bundle for Eclipse.
The following procedure describes the process of creating a Web Application for publishing
to GlassFish Server.</p><ol>
<li><b>Select File<tt>-></tt>New<tt>-></tt>Dynamic Web project.</b><p>Project creation page is displayed.</p></li>
<li><b>Enter a Project Name in the first field.</b><p>For example: <tt>MyFirstWebApp</tt>.</p></li>
<li><b>Select GlassFish Server version to use as Target Runtime.</b><p>For example: GlassFish v3 Prelude.</p></li>
<li><b>Click Finish.</b><p>A new dynamic Web Project is created and is visible in Project Explorer
panel.</p><p>A default JSP file <tt>index.jsp</tt> page is created and opened in JSP Editor
View.</p></li>
<li><b>Add or modify <tt>index.jsp</tt> code as required.</b></li>
<li><b>From Eclipse main menu, select Run menu or Run icon from toolbar.</b></li>
<li><b>Select Run On<tt>-&gt;</tt>GlassFish Server v3 Prelude, as the server to run this application.</b>
<hr><p><b>Note - </b>You can select <b>Always use this server when running this project</b> checkbox to streamline further run invocations.</p>
<hr>
</li>
<li><b>Build the Web Application and publish to GlassFish Server v3 Prelude.</b><p>The Console view displays server log. The <tt>index.jsp</tt> page appears in Eclipse IDE
default Web Browser.</p>
<hr><p><b>Note - </b>You can always switch back and forth between Editor view and Web Browser
view. Both views are available from Eclipse Editor. Each time the application is
changed, it is redeployed on server. You can reload the application in the
browser to see the changes immediately.</p>
<hr>
</li></ol>

<a name="task-6"></a><h4>To add a Servlet and use Session Preservation feature</h4><p> Session Preservation is a new and convenient feature of GlassFish Server v3
Prelude, critical when you are developing/debugging complex Web Applications with complex Session management
such as Shopping Cart applications, and when you want to retain information about
your Sessions across redeployments.</p><p>This section of document explains how to use Session Preservation feature. For testing
this feature, you can use the Project created in the previous example or
create a new Project. If you are using the previously created project, skip
Step 1.</p><h6>Before You Begin</h6><p>This section of the document is applicable for GlassFish Server v3 Prelude only.
It is not applicable to GlassFish Server v2.1.</p><ol>
<li><b>Create a new Dynamic Web Project, in the manner described in the previous
section.</b></li>
<li><b>From Project Explorer window, right click the Project node.</b></li>
<li><b>Select New<tt>-></tt>Servlet, to create a new servlet.</b><p>Create Servlet screen is displayed.</p></li>
<li><b>Enter a package name.</b><p>For example: <tt>apkg</tt>.</p></li>
<li><b>Enter a servlet name.</b><p>For example:<tt>MyServlet</tt></p></li>
<li><b>Click Finish.</b><p>A new servlet is created and opened in Eclipse IDE editor view.</p></li>
<li><b>From Eclipse IDE editor, add more logic to the servlet.</b><p>An example Servlet code for showing Session data is available from here:<a href="https://glassfishplugins.dev.java.net/eclipse34/MyServlet.java">Sample Servlet code for Session Preservation</a></p></li>
<li><b>Save servlet file.</b><p>The file is deployed on the GlassFish Server.</p></li>
<li><b>Go to Web Browser view to activate the servlet page.</b><p><tt>http://localhost:8080/MyFirstWebApp/MyServlet</tt>.</p></li>
<li><b>Reload servlet web page, a number of times.</b><p>In the servlet page, you can see the Number of Previous Accesses field
growing. This counter is stored in Servlet Session data. </p></li>
<li><b>Modify servlet source code, and redeploy the web application.</b><p>Go the Web Browser view and click Reload to see the updated
page.</p>
<hr><p><b>Tip - </b>By default, Deploy On Save mode is enabled. When you save servlet source
file, it is automatically redeployed on the Server. </p>
<hr>
</li>
<li><b>To test Session Preservation feature, add some text in servlet source code.</b><p>For example:</p><pre>session.putValue("accessCount", accessCount);
out.println (
..............
..............
"&#60;H2> Updated Servlet!!! Information on your Session:&#60;H2>\n"+
..............
..............</pre><p>and save the servlet page.</p><p>When the update is saved, the servlet is redeployed.</p></li>
<li><b>Access the web page once again.</b><p> You can see the newly added text, <tt>Updated Servlet!!!</tt> in the web page,
and the field, <tt>Number of Previous Accesses</tt>, as 5.</p><p>With the above process you have verified that the Servlet Session data was
preserved during redeployment.</p></li></ol>

<a name="task-7"></a><h4>To debug a Servlet with GlassFish Server</h4><p>GlassFish Tools Bundle for Eclipse enables you to debug various types of web
applications such as servlet helper classes, JPA (Java Persistence API) applications, Web Services,
or JSP pages containing Java code fragments. The following procedures describes the process
of setting up a servlet for debugging.</p><ol>
<li><b>Set breakpoints for an application.</b><p>Go relevant line of application code from Eclipse IDE editor.</p></li>
<li><b>Select Run<tt>-></tt>Toggle Break Point.</b><ul>
<li><b>You can also select the popup menu available in the vertical grey bar,
on the left side of Eclipse IDE editor, and select Toggle Break
Point.</b></li></ul></li>
<li><b>If Eclipse IDE can set up a breakpoint on this selected line, a
small icon will appear on the vertical grey bar.</b><p>If Eclipse IDE cannot set a breakpoint on this line, you will be
notified.</p></li>
<li><b>Select Debug from Server popup menu to start GlassFish server in debug mode.</b><p>Eclipse IDE will switch to Debug Perspective as soon as the Web Page
with breakpoint set, is activated.</p><p>You can now start to debug the servlet using the feature-rich Eclipse Debugger.</p>
<hr><p><b>Note - </b>For debugging a project, you can always use the Debug As icon from
the Menu toolbar or the Debug As option from the Project node
right click menu.</p><p>For more information on using the Eclipse IDE, use the Help Menu.</p>
<hr>
</li></ol>

<a name="task-8"></a><h4>To use the preconfigured MySQL Database Connector with GlassFish Server</h4><p>The GlassFish Tools Bundle for Eclipse includes a preconfigured MySQL database connector. You
can start using it with your MySQL database with minimal configuration effort.</p><p>The following steps describe how to use the preconfigured MySQL database connector.</p><h6>Before You Begin</h6><p>Install MySQL database if you do not have a pre-installed MySQL database instance.
For more information on installing MySQL, See <a href="http://dev.mysql.com/doc/refman/5.4/en/installing.html">MySQL installation documentation</a>.</p><ol>
<li><b>From Eclipse IDE, select Windows->Preferences</b></li>
<li><b>Select Data Management from left-hand side panel.</b></li>
<li><b>Click Connectivity</b></li>
<li><b>Click Driver Definitions.</b></li>
<li><b>Select MySQL JDBC Bundled Driver Default and click Edit.</b></li>
<li><b>Edit the parameters for the MySQL Driver Definition as required.</b></li>
<li><b>Click OK to close dialog box.</b></li>
<li><b>Click OK to close Preferences screen.</b></li></ol>

<a name="task-9"></a><h4>To create a new Data Source and register it with GlassFish Server</h4><p>As described in <a href="p5.html">Chapter&#160;3, Configuring and Using GlassFish Server from Eclipse IDE</a>, by default GlassFish Tools Bundle for Eclipse installs and
configures a database instance for you.</p><p>You can also create a new Data Source and register it with
GlassFish Server from Eclipse IDE. The procedure is as follows:</p><ol>
<li><b>Select Databases from Data Source Explorer view. Right click the Databases node and
select New.</b></li>
<li><b>Select Derby from New Connection Profile options. Accept default name New Derby or
choose another name.</b></li>
<li><b>Click Next.</b><p>Derby Connection Profile screen is displayed.</p></li>
<li><b>Click New Driver Definition button (located next to Driver text box).</b><p>Edit Driver Definition screen is displayed.</p></li>
<li><b>Select Jar List tab, and select location of Derby Client jar file from
GlassFish Server Installation directory.</b></li>
<li><b>Select Properties tab and view properties of Driver Definition.</b></li>
<li><b>Click OK to exit Edit Driver Definition screen.</b></li>
<li><b>From Connection Profile screen, modify any other details as required.</b></li>
<li><b>Click Test Connection to test Database connectivity.</b></li>
<li><b>Click Next to view a summary of Connection Profile.</b></li>
<li><b>Verify Profile details.</b><p>If necessary, go back and change details.</p></li>
<li><b>Click Finish to complete creation of new Data Source profile.</b><p>The newly created Derby Data Source can be seen from Data Source
Explorer view.</p>
<hr><p><b>Note - </b>You can also edit Data Resources from GlassFish Server Administration Console.</p><p>Additional details on editing  Data Resources are available from GlassFish Server Administration
Documentation.</p>
<hr>
</li></ol>

<a name="task-10"></a><h4>To create a JPA Project for GlassFish Server</h4><p>The following steps explain how to create a Java Persistence API (JPA) based
project and generate DDL for it.</p><h6>Before You Begin</h6><p>This section of the document is applicable for GlassFish Server v3 Prelude only.
It is not applicable to GlassFish Server v2.1.</p><ol>
<li><b>Select Window<tt>-></tt>Preferences.</b><p>Preferences page will be displayed.</p></li>
<li><b>Select GlassFish Server Preferences.</b></li>
<li><b>Select the checkbox next to Start JavaDB database process when Starting GlassFish Server
option.</b></li>
<li><b>Click OK to close the page.</b></li>
<li><b>Start or restart GlassFish Server.</b><p>The JavaDB database is started along GlassFish Server.</p></li>
<li><b>Select File<tt>-></tt>New<tt>-></tt>Other.</b><p>New project wizard will be displayed.</p></li>
<li><b>Select JPA<tt>-></tt>JPA Project.</b></li>
<li><b>Click Next to continue.</b><p>New JPA Project wizard will be displayed.</p></li>
<li><b>Create a name and select to run on GlassFish Server v3 Prelude.</b><p>For example:<tt>MyJPAProject</tt>.</p></li>
<li><b>Click Next to continue.</b></li>
<li><b>Select <tt>EclipseLink</tt> as Platform and <tt>Sample JavaDB Database</tt> as connection.</b></li>
<li><b>Select Annotated classes must be listed in <tt>persistence.xml</tt> option, for Persistent class management.</b><p>Other default options need not be changed.</p></li>
<li><b>Click Finish to complete new JPA project creation.</b></li>
<li><b>Accept message prompt to switch to JPA perspective.</b></li>
<li><b>Select File<tt>-></tt>New<tt>-></tt>Other.</b><p>New project wizard will be displayed.</p></li>
<li><b>Select JPA<tt>-></tt>Entity.</b></li>
<li><b>Create a name and package name.</b><p>For example: <tt>MyEntity</tt></p></li>
<li><b>Click Next to continue.</b></li>
<li><b>Add two fields in the Entity Fields panel, one of which should be
selected as key field.</b><p>For example: <tt>Type=Int:Fieldname=id, Type=String:Fieldname=name</tt>.</p></li>
<li><b>Click Finish.</b><p>A New Entity Class is created</p></li>
<li><b>Right click on JPA Project Node and select JPATools<tt>-></tt>Generate DDL.</b></li>
<li><b>Click OK to warning that you are about to create new tables.</b><p>New tables will be created in database.</p></li>
<li><b>Select Data Source Explorer.</b></li>
<li><b>Select the Sample JavaDB database.</b><p>You can view the newly created tables by expanding the Sample JavaDB Database
node.</p></li></ol>

<a name="add-res"></a><h4>Additional Resources</h4>
<p>The following resources provide additional information on Eclipse IDE and GlassFish Server.</p>
<ul><li><p><a href="http://docs.sun.com/app/docs/coll/1343.7">Sun GlassFish Enterprise Server v3 Prelude Documentation</a></p></li>
<li><p><a href="http://docs.sun.com/app/docs/coll/1343.6">Sun GlassFish Enterprise Server 2.1 Documentation</a></p></li>
<li><p><a href="http://help.eclipse.org/ganymede/index.jsp">Eclipse Documentation</a></p></li></ul>



<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p5.html">Previous</a></td>
<td></td>
<td></td>
<td><a href="p7.html">Next</a></td>
</tr>
</table>



</body>
</html>

