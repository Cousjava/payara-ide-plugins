<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Developing Applications for GlassFish Server from Eclipse IDE - GlassFish Tools Bundle for Eclipse User Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-02-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p5.html">Previous</a></td>
<td></td>
<td></td>
<td><a href="p7.html">Next</a></td>
</tr>
</table>


<a name="chapter3"></a>Chapter&#160;4<h3>Developing Applications for GlassFish Server from Eclipse IDE</h3><p>When the GlassFish Tools Bundle for Eclipse is configured and ready to use,
you can develop applications for GlassFish from Eclipse IDE.</p><p>The following topics will help you get familiar with developing applications for GlassFish
Server from Eclipse IDE, by using the advanced features available in GlassFish Server
v3 Prelude.</p><p>This section of the document assumes GlassFish Server v3 Prelude as the Server
runtime. You can also use GlassFish Server v2.1 for developing applications but without
the features specific to v3 Prelude.</p>

<a name="to-develop"></a><h3></h3>

<ul><li><p><a href="#task-5">To Create a new Web Application project for GlassFish Server</a></p></li>
<li><p><a href="#task-6">To add a Servlet and use Session Preservation feature</a></p></li>
<li><p><a href="#task-7">To debug a Servlet with the GlassFish Server</a></p></li>
<li><p><a href="#task-8">To Create a New Data Source and register it to the GlassFish Server</a></p></li>
<li><p><a href="#task-9">To create a JPA Project for GlassFish Server</a></p></li></ul>


<a name="task-5"></a><h4>To Create a new Web Application project for GlassFish Server</h4><p>You can create different types of applications using the GlassFish Tools Bundle for
Eclipse. The following procedure describes the process of creating a Web Application for
publishing to GlassFish Server.</p><ol>
<li><b>Select File->New->Dynamic Web project.</b></li>
<li><b>Enter a Project Name in the first field.</b><p>For example: <tt>MyFirstWebApp</tt></p></li>
<li><b>Select the GlassFish Server version to use as Target Runtime and select Finish.</b><p>For example: GlassFish v3 Prelude.</p></li>
<li><b>Click Finish to complete creation of a new Project.</b></li>
<li><b>A new project is visible in the Project Explorer view. A default JSP
file <tt>index.jsp</tt> page is created and opened in the JSP Editor View.</b></li>
<li><b>Add or modify <tt>index.jap</tt> code as required.</b></li>
<li><b>From Eclipse main menu, select the Run menu or toolbar icon. Select Run
On &#8212;>GlassFish Server v3 Prelude as the server to run this application.</b>
<hr><p><b>Note - </b>You can select the <b>Always use this server when running this project</b> checkbox to streamline further run invocations.</p>
<hr>
</li>
<li><b>Build the Web Application and published to GlassFish Server v3 Prelude.</b><p>The Console view displays the server log. The <tt>index.jsp</tt> page appears in
the Eclipse IDE default Web Browser.</p>
<hr><p><b>Note - </b>You can always switch back and forth between the JSP editor view and
the Web Browser view. Both views are available from Eclipse IDE. Each time
the application is changed, it is redeployed on server, and page is
reloaded to see the changes immediately.</p>
<hr>
</li></ol>

<a name="task-6"></a><h4>To add a Servlet and use Session Preservation feature</h4><p> Session Preservation is a new and convenient feature of GlassFish Server v3
Prelude, critical when you are developing/debugging complex Web Applications with complex Session management
such as Shopping Cart applications, and when you want to retain the information
of your Sessions across redeployments.</p><h6>Before You Begin</h6><p>This section of the Document is applicable for GlassFish Server v3 Prelude only.
It is not applicable to GlassFish Server v2.1.</p><p>For testing this feature, you can use the Project created in the
previous example or create a new Project. If you are using the previously
created project, skip Step 1.</p><ol>
<li><b>Create a new Dynamic Web Project, in the manner described in the previous
section.</b></li>
<li><b>From the Project Explorer window, right click on Project node.</b></li>
<li><b>Select the New->Servlet to create a new servlet.</b></li>
<li><b>From Create Servlet screen, enter a package name.</b><p>For example: <tt>apkg</tt></p></li>
<li><b>Enter a servlet name.</b><p>For example:<tt>MyServlet</tt></p></li>
<li><b>Click Finish to complete servlet creation.</b><p>The servlet is created and opened in the Eclipse IDE editor view.</p></li>
<li><b>From the Eclipse IDE editor, add more logic to the servlet. An example
Servlet code for showing Session data is available from here:<a href="https://glassfishplugins.dev.java.net/eclipse34/MyServlet.java">Sample Servlet code for Session Preservation</a></b></li>
<li><b>Save the servlet file, and go the to Web Browser view to
activate the servlet page: </b><p><tt>http://localhost:8080/MyFirstWebApp/MyServlet</tt></p></li>
<li><b>When the servlet web page is reloaded a few times, you can
see the Number of Previous Accesses field growing. This counter is stored in
the Servlet Session data. You can now modify the servlet source code, and
redeploy the web application.</b>
<hr><p><b>Tip - </b>By default, the Deploy On Save mode is enabled. When you save
the servlet source file, it is automatically redeployed on the Server. Go the Web
Browser view and click the Reload button to see the updated page.</p>
<hr>
</li>
<li><b>To test Session Preservation feature, you can add some text in the servlet
as shown below: </b><pre>session.putValue("accessCount", accessCount);
out.println ( 
..............
..............
"&#60;H2> Updated Servlet!!! Information on your Session:&#60;H2>\n"+
..............
..............</pre><p>and update the servlet page.</p></li>
<li><b>After the page update, the servlet has been redeployed. You can then see
the newly added text, <tt>Updated Servlet!!!</tt>in the web page, and the field, <tt>Number of Previous Accesses</tt>, as
5.</b><p>This verifies that the Servlet Session data was preserved during redeployment.</p></li></ol>

<a name="task-7"></a><h4>To debug a Servlet with the GlassFish Server</h4><p>The GlassFish Tools Bundle for Eclipse enables you to debug various types of
web applications such as servlet helper classes, JPA applications, Web Services, or JSP
pages containing Java code fragments. The following procedures describes the process of setting
up a servlet for debugging.</p><ol>
<li><b>To set breakpoints for an application, go the relevent line of the code
from Eclipse IDE editor. </b></li>
<li><b>Select the Popup menu available in the vertical grey bar on the left
side of the Eclipse IDE editor and select Toggle BreakPoint.</b></li>
<li><b>If Eclipse IDE can set up a break point on this selected
line, a small icon will appear on the bar. If Eclipse IDE cannot
set a breakpoint on this line, you are notified.</b></li>
<li><b>Start the GlassFish server in debug mode from Server Popup menu->Debug.</b><p>Eclipse IDE will switch to the Debug Perspective as soon as the Web
Page with break point set, is activated.</p><p>You can now start debugging the servlet using the feature-rich Eclipse Debugger</p></li></ol>

<a name="task-8"></a><h4>To Create a New Data Source and register it to the GlassFish Server</h4><p>You can create a new Data Source and register it with GlassFish
Server from Eclipse IDE. The procedure is as follows:</p><ol>
<li><b>From the Data Source Explorer view, select Databases. Right click the node and
select New.</b></li>
<li><b>Select Derby from the New Connection Profile options. Accept the default name New
Derby or choose another name and select Next.</b><p>Derby Connection Profile screen is displayed.</p></li>
<li><b>Click New Driver Definition button located next to the Driver text box.</b><p>Edit Driver Definition screen is displayed.</p></li>
<li><b>Select the Jar List tab, and select location of Derby Client jar file
from GlassFish Server Installation directory.</b></li>
<li><b>Select the Properties tab and view the properties of the Driver Definition.</b></li>
<li><b>Click OK to exit Edit Driver Definition screen.</b></li>
<li><b>From Connection Profile screen, modify any other details as required.</b></li>
<li><b>Test the Database connection by pressing the Test Connection button.</b></li>
<li><b>Click Next to view a summary of the Connection Profile.</b></li>
<li><b>Verify the Profile details. If necessary, go back and change the details.</b></li>
<li><b>Click Finish to complete the creation of the new Data Source profile.</b><p>The newly created Derby Data Source can be seen from the Data Source
Explorer tab view.</p>
<hr><p><b>Note - </b>You can also edit the Data Resources from the GlassFish Server Administration Console.</p><p>The details are available from GlassFish Server Administration Documentation.</p>
<hr>
<p></p></li></ol>

<a name="task-9"></a><h4>To create a JPA Project for GlassFish Server</h4><p>The following steps explain how to develop a Java Persistence API based project.</p><ol>
<li><b>Open Eclipse IDE Window->Preferences dialog box and select GlassFish Server Preferences. set the
Start the JavaDB database process when Starting GlassFish Server to true.</b></li>
<li><b>Start or restart the GlassFish Server. This will start the JavaDB database as
well as the GlassFish Server.</b></li>
<li><b>From the Eclipse IDE main menu, select File->New->Other.</b></li>
<li><b>Select JPA->JPA Project in the Popup wizard.</b></li>
<li><b>Click the Next button.</b></li>
<li><b>Create a name and select to run on GlassFish Server v3 Prelude.</b><p>For example:<tt>MyJPAProject</tt></p></li>
<li><b>Click the next button.</b></li>
<li><b>Select EclipseLink as the Platform and the Sample JavaDB Database as the connection.</b></li>
<li><b>Select Annotated classes must be listed in persistence.xml for Persistent Class Management.</b></li>
<li><b>Other default options might not be changed.</b></li>
<li><b>Complete the wizard.</b></li>
<li><b>Accept the prompt to switch to JPA perspective.</b></li>
<li><b>From Eclipse main menu, select File->New->Other.</b></li>
<li><b>Select JPA->Entity in the Popup wizard.</b></li>
<li><b>Create a name and package name.</b><p>For example: <tt>MyEntity</tt></p></li>
<li><b>Click Next button to continue.</b></li>
<li><b>On the page, add two fields, one of which should be selected
as key field.</b><p>For example: <tt>Type=Int:Fieldname=id, Type=String:Fieldname=Name</tt></p></li>
<li><b>Click Finish to complete the wizard.</b></li>
<li><b>Right click on JPA Project Node and select JPA->Generate DDL.</b></li>
<li><b>Click OK to the warning that you are about to create new
tables.</b><p>New tables will be created in database.</p></li>
<li><b>Select DataSource Explorer view to see the available databases.</b><p>You can view the newly created tables by expanding the Sample JavaDB Database
node.</p></li></ol>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p5.html">Previous</a></td>
<td></td>
<td></td>
<td><a href="p7.html">Next</a></td>
</tr>
</table>



</body>
</html>

