<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Administering the Virtual Machine for the Java Platform - Sun GlassFish Enterprise Server v3 Prelude Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p6.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p8.html">Next</a></td>
</tr>
</table>


<a name="ablwj"></a>Chapter&#160;4<h3>Administering the Virtual Machine for the Java Platform</h3><a name="indexterm-127"></a><p>This chapter provides procedures for administering the Virtual Machine for the Java<sup>TM</sup> platform
(Java Virtual Machine) or JVM<sup>TM</sup> machine) in the Sun GlassFish<sup>TM</sup> Enterprise Server v3
Prelude environment by using the <tt>asadmin</tt> command-line utility.</p><p> The following topics are addressed here:</p>
<ul><li><p><a href="#gepzd">Administering JVM Options</a></p></li>
<li><p><a href="#ggnde">Administering Profilers</a></p></li></ul>
<p>Instructions for accomplishing these tasks by using the Administration Console are contained in
the Administration Console online help.</p>

<a name="gepzd"></a><h3>Administering JVM Options</h3>
<a name="indexterm-128"></a><a name="indexterm-129"></a><p>The Java Virtual Machine is an interpretive computing engine responsible for running the
byte codes in a compiled Java program. The virtual machine translates the Java
byte codes into the native instructions of the host machine. Enterprise Server, being
a Java process, requires a virtual machine to run and support the
Java applications running on it. JVM settings are part of an Enterprise Server
configuration. </p><p>The following instructions are used to administer the JVM options:</p>
<ul><li><p><a href="#ggnes">To Create JVM Options</a></p></li>
<li><p><a href="#ggnce">To List JVM Options</a></p></li>
<li><p><a href="#ggnfi">To Delete JVM Options</a></p></li>
<li><p><a href="#ggnbu">To Generate a JVM Report</a></p></li></ul>


<a name="ggnes"></a><h4>To Create JVM Options</h4><a name="indexterm-130"></a><a name="indexterm-131"></a><a name="indexterm-132"></a><a name="indexterm-133"></a><p>The remote <tt>create-jvm-options</tt> command enables you to create JVM options in the Java
configuration or the profiler elements of the <tt>domain.xml</tt> file. If JVM options are
created for a profiler, these options are used to record the settings that
initiate the profiler.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Create JVM options by using the <a href="http://docs.sun.com/doc/820-4497/create-jvm-options-1?a=view"><tt>create-jvm-options</tt>(1)</a> command.</b><p>To create more than one JVM option, use a colon (:) to separate
the options. If the JVM option itself contains a colon (:), use the
backslash (\) to offset the colon delimiter.</p></li>
<li><b>To apply your changes, restart Enterprise Server.</b><ol style="list-style-type: lower-alpha">
<li><b>Stop Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoch">To Stop a Domain (or Server)</a>.</p></li>
<li><b>Start Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoda">To Start a Domain (or Server)</a>.</p></li></ol></li></ol><a name="ghqwm"></a><h6>Example&#160;4-1 Creating JVM Options</h6><pre><tt><b>asadmin create-jvm-options -Dunixlocation=/root/ example:-Dvariable=\$HOME:-Dwindowslocation =d\\:\\\sun\\\appserver:-Doption1=-value1</b></tt></pre><p>Information similar to the following is displayed:</p><pre>created 4 option(s)
Command create-jvm-options executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin create-jvm-options <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnce"></a><h4>To List JVM Options</h4><a name="indexterm-134"></a><a name="indexterm-135"></a><a name="indexterm-136"></a><a name="indexterm-137"></a><p>The remote <tt>list-jvm-options</tt> command enables you to list the existing JVM options.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>List JVM options by using the <a href="http://docs.sun.com/doc/820-4497/list-jvm-options-1?a=view"><tt>list-jvm-options</tt>(1)</a> command.</b></li></ol><a name="ggphx"></a><h6>Example&#160;4-2 Listing JVM Options</h6><p>The following example command lists all JVM options:</p><pre><tt><b>asadmin list-jvm-options</b></tt></pre><p>Information similar to the following is displayed:</p><pre>-Djava.security.auth.login.config=${com.sun.aas.instanceRoot}/config/login.conf
-XX: LogVMOutput
-XX: UnlockDiagnosticVMOptions
-Dcom.sun.enterprise.config.config_environment_factory_class=com.sun.enterprise.
config.serverbeans.AppserverConfigEnvironmentFactory
-Djavax.net.ssl.keyStore=${com.sun.aas.instanceRoot}/config/keystore.jks
-XX:NewRatio=2
-Djava.security.policy=${com.sun.aas.instanceRoot}/config/server.policy
-Djdbc.drivers=org.apache.derby.jdbc.ClientDriver
-Djavax.net.ssl.trustStore=${com.sun.aas.instanceRoot}/config/cacerts.jks
-client
-Djava.ext.dirs=${com.sun.aas.javaRoot}/lib/ext${path.separator}${com.sun.aas.ja
vaRoot}/jre/lib/ext${path.separator}${com.sun.aas.instanceRoot}/lib/ext${path.se
parator}${com.sun.aas.derbyRoot}/lib
-Xmx512m
-XX:LogFile=${com.sun.aas.instanceRoot}/logs/jvm.log
-Djava.endorsed.dirs=${com.sun.aas.installRoot}/lib/endorsed

Command list-jvm-options executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin list-jvm-options <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnfi"></a><h4>To Delete JVM Options</h4><a name="indexterm-138"></a><a name="indexterm-139"></a><a name="indexterm-140"></a><p>The remote <tt>delete-jvm-options</tt> command enables you to delete JVM options from the Java
configuration or profiler elements of the <tt>domain.xml</tt> file. </p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Obtain the exact name of the JVM option that you are deleting.</b><p>To list the existing JVM options:</p><pre><tt><b>asadmin list-jvm-options</b></tt></pre></li>
<li><b>If necessary, notify users that the JVM option is being deleted.</b></li>
<li><b>Delete JVM options by using the <a href="http://docs.sun.com/doc/820-4497/delete-jvm-options-1?a=view"><tt>delete-jvm-options</tt>(1)</a> command.</b><p>To remove more than one JVM option, use a colon (:) to separate
the options. If the JVM option itself contains a colon, use the backslash
(\) to offset the colon delimiter.</p></li>
<li><b>To apply your changes, restart Enterprise Server.</b><ol style="list-style-type: lower-alpha">
<li><b>Stop Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoch">To Stop a Domain (or Server)</a>.</p></li>
<li><b>Start Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoda">To Start a Domain (or Server)</a>.</p></li></ol></li></ol><a name="ggpgz"></a><h6>Example&#160;4-3 Deleting a JVM Option</h6><p>The following example command removes a single JVM option:</p><pre><tt><b>asadmin delete-jvm-options -Dopt1=A</b></tt></pre><p>Information similar to the following is displayed:</p><pre>deleted 1 option(s)
Command delete-jvm-options executed successfully.</pre><a name="ggpkr"></a><h6>Example&#160;4-4 Deleting Multiple JVM Options</h6><p>The following example command removes multiple JVM options:</p><pre><tt><b>asadmin delete-jvm-options -Doption1=-value1:-Dvariable=\$HOME</b></tt></pre><p>Information similar to the following is displayed:</p><pre>deleted 2 option(s)
Command delete-jvm-options executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin delete-jvm-options <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnbu"></a><h4>To Generate a JVM Report</h4><a name="indexterm-141"></a><a name="indexterm-142"></a><a name="indexterm-143"></a><p>The remote <tt>generate-jvm-report</tt> command enables you to generate a JVM report showing the
threads (dump of a stack trace), classes, memory, and loggers for a specified
 domain administration server (DAS). You can generate the following types of reports: summary
(default), class, thread, log.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Generate the report by using the <a href="http://docs.sun.com/doc/820-4497/generate-jvm-report-1?a=view"><tt>generate-jvm-report</tt>(1)</a> command.</b></li></ol><a name="ghhkr"></a><h6>Example&#160;4-5 Generating a JVM Report</h6><p>The following example command displays summary information about the threads, classes, and memory:</p><pre>generate-jvm-report --type summary </pre><p>Information similar to the following is displayed (partial output):</p><pre>Operating System Information:
Name of the Operating System: Windows XP
Binary Architecture name of the Operating System: x86, Version: 5.1
Number of processors available on the Operating System: 2
System load on the available processors for the last minute: NOT_AVAILABLE. 
(Sum of running and queued runnable entities per minute).
.
,
.
user.home = C:\Documents and Settings\Jennifer
user.language = en
user.name = Jennifer
user.timezone = America/New_York
user.variant =
variable = \$HOME
web.home = C:\prelude\v3_prelude_release\distributions\web\target\glassfish\modu
les\web
Command generate-jvm-report executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin generate-jvm-report <tt>--help</tt></tt>
at the command line or see <a href="http://docs.sun.com/doc/820-4497/generate-jvm-report-1?a=view"><tt>generate-jvm-report</tt>(1)</a> in the reference manual.</p>

<a name="ggnde"></a><h3>Administering Profilers</h3>
<a name="indexterm-144"></a><p><b>Profilers</b> generate information used to analyze server performance. If JVM options are created
for a profiler, the options are used to record the settings needed to
activate a particular profiler. You can use the <tt>create-jvm-options</tt> command to create JVM options
in the Java configuration or profiler elements of the <tt>domain.xml</tt> file. </p><p>A server instance is associated with a particular profile by the profiler element
in the Java configuration.</p><p>The following instructions are used to administer profiles:</p>
<ul><li><p><a href="#ggneb">To Create a Profiler</a></p></li>
<li><p><a href="#ggnem">To Delete a Profiler</a></p></li></ul>


<a name="ggneb"></a><h4>To Create a Profiler</h4><a name="indexterm-145"></a><a name="indexterm-146"></a><a name="indexterm-147"></a><p>The remote <tt>create-profiler</tt> command enables you to create a profiler element in the
Java configuration.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>Create a profiler by using the <a href="http://docs.sun.com/doc/820-4497/create-profiler-1?a=view"><tt>create-profiler</tt>(1)</a> command.</b></li>
<li><b>To apply your changes, restart Enterprise Server.</b><ol style="list-style-type: lower-alpha">
<li><b>Stop Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoch">To Stop a Domain (or Server)</a>.</p></li>
<li><b>Start Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoda">To Start a Domain (or Server)</a>.</p></li></ol></li></ol><a name="ggpla"></a><h6>Example&#160;4-6 Creating a Profiler</h6><p>The following example command creates a profiler named <tt>sample_profiler</tt>:</p><pre><tt><b>asadmin create-profiler --classpath=/home/appserver/ --nativelibrarypath=/u/home/lib --enabled=false --property=defaultuser=admin:password=adminadmin sample_profiler</b></tt></pre><p>Information similar to the following is displayed:</p><pre>Command create-profiler executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin create-profiler <tt>--help</tt></tt>
at the command line.</p>

<a name="ggnem"></a><h4>To Delete a Profiler</h4><a name="indexterm-148"></a><a name="indexterm-149"></a><a name="indexterm-150"></a><p>The remote <tt>delete-profiler</tt> command enables you to delete a profiler element from the
Java configuration.</p><ol>
<li><b>Ensure that the server is running.</b><p>Remote commands require a running server.</p></li>
<li><b>If necessary, notify users that the profiler is being deleted.</b></li>
<li><b>Delete the profiler by using the <a href="http://docs.sun.com/doc/820-4497/delete-profiler-1?a=view"><tt>delete-profiler</tt>(1)</a> command.</b></li>
<li><b>To apply your changes, restart Enterprise Server.</b><ol style="list-style-type: lower-alpha">
<li><b>Stop Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoch">To Stop a Domain (or Server)</a>.</p></li>
<li><b>Start Enterprise Server.</b><p>For instructions, see <a href="p5.html#ggoda">To Start a Domain (or Server)</a>.</p></li></ol></li></ol><a name="ggpkc"></a><h6>Example&#160;4-7 Deleting a Profiler</h6><p>The following example command deletes the profiler named <tt>sample_profiler</tt>:</p><pre><tt><b>delete-profiler sample_profiler</b></tt></pre><p>Information similar to the following is displayed:</p><pre>Command delete-profiler executed successfully.</pre><h6>See Also</h6><p>To see the full syntax and options of the command, type <tt>asadmin delete-profiler <tt>--help</tt></tt>
at the command line.</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p6.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p8.html">Next</a></td>
</tr>
</table>



</body>
</html>

