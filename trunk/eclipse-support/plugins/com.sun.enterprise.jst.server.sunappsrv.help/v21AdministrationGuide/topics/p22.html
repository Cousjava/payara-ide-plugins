<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Configuring Management Rules - Sun GlassFish Enterprise Server 2.1 Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-12-01">
</head>

<body>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&#160;</td>
<td><a href="p21.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p23.html">Next</a></td>
</tr>
</table>


<a name="gbnfd"></a>Chapter&#160;19<h3>Configuring Management Rules</h3><p>This section contains information about setting administration policies to automate routine administration tasks,
configure self-tuning of the application server for diverse runtime conditions and improve availability by
preventing failures. This section also contains information on the self-management templates, which are
predefined management rules that you can customize. </p><p>This section contains the following topics: </p>
<ul><li><p><a href="#gbnej">About Management Rules</a></p></li>
<li><p><a href="#gcnzq">Configuring Management Rules</a></p></li></ul>


<a name="gbnej"></a><h3>About Management Rules</h3>
<p>Management rules enable you to automate routine administration tasks, configure self-tuning of the
application server for diverse runtime condition and improve availability by preventing failures. A management
rule contains an action to be taken when a specified event occurs or
a set threshold is reached. You can set management rules that can automatically
take corrective action, based on events that you specify. </p><p>A management rule consists of two parts &#8212; event and action:</p>
<ul><li><p>An <b>event</b> uses the JMX notification mechanism to trigger a predefined action. </p></li>
<li><p>An <b>action</b> is triggered when an associated event occurs. An action is an MBean which is a notification listener which implements <tt>javax.management.NotificationListener</tt>. </p></li></ul>
<p>For example, an event could be a SEVERE message logged by the EJB
logger, and an action could be alerting an administrator with the log message
contents. When the event happens, event data is passed as part of <tt>userData</tt>
part of the <tt>javax.management.Notification</tt>.</p><p>The action specified in your rule has to be implemented as a custom
MBean. Therefore, before configuring a management rule, you should deploy a custom MBean
designed to receive event notifications and take appropriate action. For details on developing
a custom MBean and deploying it, see <a href="http://docs.sun.com/doc/820-4336/gbdzi?a=view">Chapter 14, Developing Custom MBeans, in <i>Sun GlassFish Enterprise Server 2.1 Developer&#8217;s Guide</i></a>.</p><p>The Enterprise Server provides some useful events, which you can further extend by
writing custom MBeans to emit notifications. Each event can be further customized by
changing its properties.</p><p>The following event types are available:</p>
<ul><li><p>Monitor events: Monitors an attribute of an MBean. Monitor events have similar capabilities to <tt>javax.management.monitor</tt> package capabilities. In addition to monitoring simple attributes, as Java SE 5 <tt>javax.management.monitor</tt> does, monitor events also support monitoring complex attributes.</p></li>
<li><p>Notification events: Notifies of events from a custom MBean. Use these events to write custom events and thus extend the event dictionary. Any MBeans which can emit a notification can be an event. </p></li>
<li><p>System events: </p>
<ul><li><p>Lifecycle: Events for sever startup, showdown, and termination.</p></li>
<li><p>Log: Events triggered when the specified logger writes a log entry. For example, you could create a management rule to send an alert to an administrator when an EJB container logger logs a SEVERE log entry.</p></li>
<li><p>Timer: Events triggered at the specified date and time, at the specified interval, and so on. These events have capabilities similar to the <tt>javax.management.timer</tt> package. </p></li>
<li><p>Trace: Events triggered on Entry and Exit of HTTP/IIOP request methods, EJB methods, and Web methods. For example, you can design a servlet filter used to log interactions with a servlet as a management rule using Web method Entry and Exit events. </p></li>
<li><p>Cluster: Events triggered when a cluster or instance starts, stops, or fails. These events use the Group Management System cluster monitoring.</p></li></ul>
</li></ul>


<a name="gcnzq"></a><h3>Configuring Management Rules</h3>
<p>To configure management rules in the Admin Console:</p>
<ul><li><p>In the developer profile, go to Configuration -&gt; Management Rules</p></li>
<li><p>In the cluster and enterprise profiles, go to Configurations -&gt; Configuration -&gt; Management Rules</p></li></ul>

<hr><p><b>Note - </b>On this page, check All Rules Enabled to enable management rules globally. If
management rules are not enabled globally, none of the management rules are executed.
</p>
<hr>
<p>In addition, to enable a individual management rule, you must enable the rule
on this page by clicking the box next to the rule and clicking
Enable. </p><p>A rule's MBeans must also be enabled on a target. To enable MBeans,
go to Custom MBeans -&gt; MBean. On the Edit Custom MBean page, click
the Target tab to access the Custom MBean Targets page, where you can
enable the MBeans on some or all of the targets.</p><p>For details, see the online help.</p><p>To create management rules from the command line, use the <tt>create-management-rule</tt> command.
To set properties of the management rules, use the <tt>get</tt> and <tt>set</tt> commands. To
list and delete management rules, use <tt>list-management-rules</tt> and <tt>delete-management-rule</tt>. For more information,
see the online help for these commands, or <a href="http://docs.sun.com/doc/820-4332"><i>Sun GlassFish Enterprise Server 2.1 Reference Manual</i></a>.</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p21.html">Previous</a></td>
<td></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p23.html">Next</a></td>
</tr>
</table>



</body>
</html>

