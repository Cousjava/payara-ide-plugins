<?xml version="1.0" encoding="UTF-8"?>

<!--
/*
 * The contents of this file are subject to the terms 
 * of the Common Development and Distribution License 
 * (the "License").  You may not use this file except 
 * in compliance with the License.
 * 
 * You can obtain a copy of the license at 
 * glassfishplugins/www/license/CDDLv1.0.txt or 
 * https://glassfish.dev.java.net/public/CDDLv1.0.html. 
 * See the License for the specific language governing 
 * permissions and limitations under the License.
 * 
 * When distributing Covered Code, include this CDDL 
 * HEADER in each file and include the License file at 
 * glassfishplugins/www/license/CDDLv1.0.txt.  If applicable, 
 * add the following below this CDDL HEADER, with the 
 * fields enclosed by brackets "[]" replaced with your 
 * own identifying information: Portions Copyright [yyyy] 
 * [name of copyright owner]
 */
-->

<tns:ServerRuntime
    xmlns:tns="http://eclipse.org/jst/server/generic/ServerTypeDefinition"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://eclipse.org/jst/server/generic/ServerTypeDefinition ServerTypeDefinitionSchema.xsd "
    name="Sun Application Server 8.2" version="8.2">
    
    
    <property id="serverRootDirectory"  label="%serverRootDirectory"
    type="directory"
    context="runtime"
    default="C:/sun/AppServer82" />
    

    <property id="serverAddress"  label="%serverAddress"
    type="string"
    context="server"
    default="127.0.0.1" />
    
    <property id="port" label="%port"
    type="string"
    context="server"
    default="8080" />
    
    <property id="domainName"  label="%DomainName"
    type="string"
    context="server"
    default="domain1" />

    <property id="adminID"  label="%Administratorid"
    type="string"
    context="server"
    default="admin" />
    
    <property id="adminPassword" label="%AdministratorPassword"
    type="string"
    context="server"
    default="adminadmin" />
    


    <port>
        <no>${port}</no>
        <name>Http</name>
        <protocol>http</protocol>
    </port>

    <module>
        <type>jst.web</type>
        <publishDir>${serverRootDirectory}/domains/${domainName}/autodeploy</publishDir>
        <publisherReference>org.eclipse.jst.server.generic.antpublisher</publisherReference>
    </module>

    <module>
        <type>jst.ejb</type>
        <publishDir>${serverRootDirectory}/domains/${domainName}/autodeploy</publishDir>
        <publisherReference>org.eclipse.jst.server.generic.antpublisher</publisherReference>
    </module>

    <module>
        <type>jst.ear</type>
        <publishDir>${serverRootDirectory}/domains/${domainName}/autodeploy</publishDir>
        <publisherReference>org.eclipse.jst.server.generic.antpublisher</publisherReference>
    </module>


    <project>
        <classpathReference>sunappsrv.project</classpathReference>
    </project>
	
    <start>
        <external  >${serverRootDirectory}/bin/asadmin.sh start-domain ${domainName}</external>
        <external os="Windows">${serverRootDirectory}/bin/asadmin.bat start-domain domain1</external>
        <programArguments>start-domain  ${domainName}</programArguments>
        <workingDirectory>${serverRootDirectory}</workingDirectory>
        <debugPort>567</debugPort>

    </start>

    <stop>
        <external>${serverRootDirectory}/bin/asadmin.sh stop-domain ${domainName} </external>
        <external os="Windows">${serverRootDirectory}/bin/asadmin.bat stop-domain ${domainName} </external>
        <programArguments>stop-domain domain1 ARGS do not work yet in Eclipse</programArguments>
        <workingDirectory>${serverRootDirectory}</workingDirectory>
    </stop>
        
    <publisher id="org.eclipse.jst.server.generic.antpublisher">
        <publisherdata>
            <dataname>build.file</dataname>
            <datavalue>/serverdef/sunappsrv-ant.xml</datavalue>
        </publisherdata>
        <publisherdata>
            <dataname>target.publish.j2ee.web</dataname>
            <datavalue>deploy.j2ee.web</datavalue>
        </publisherdata>
        <publisherdata>
            <dataname>target.publish.j2ee.ejb</dataname>
            <datavalue>deploy.j2ee.ejb</datavalue>
        </publisherdata>
        <publisherdata>
            <dataname>target.unpublish.j2ee.web</dataname>
            <datavalue>undeploy.j2ee.web</datavalue>
        </publisherdata>
        <publisherdata>
            <dataname>target.unpublish.j2ee.ejb</dataname>
            <datavalue>undeploy.j2ee.ejb</datavalue>
        </publisherdata>			
    </publisher>


    <classpath id="sunappsrv.project" >
        <archive path="${serverRootDirectory}/lib/j2ee.jar" />
        <archive path="${serverRootDirectory}/lib/mail.jar" />
        <archive path="${serverRootDirectory}/lib/jsf-api.jar" />
        <archive path="${serverRootDirectory}/lib/appserv-jstl.jar" />
        <archive path="${serverRootDirectory}/lib/appserv-tags.jar" />
        <archive path="${serverRootDirectory}/lib/activation.jar" />
        <archive path="${serverRootDirectory}/lib/jaxr-api.jar" />
        <archive path="${serverRootDirectory}/lib/jaxrpc-api.jar" />
        <archive path="${serverRootDirectory}/lib/saaj-api.jar" />

    </classpath>
	
    <jndiConnection>
        <providerUrl>jnp://${serverAddress}:1099</providerUrl>
        <initialContextFactory>org.jnp.interfaces.NamingContextFactory</initialContextFactory>
        <jndiProperty>
            <name></name>
            <value></value>
        </jndiProperty>
    </jndiConnection>
</tns:ServerRuntime>
